import{A as te,B as ne,O as re,P as ae,S as oe,b as J,c as Y,d as z,f as Q,ga as le,p as W,v as X,w as Z,x as ee,z as ie}from"./chunk-B7BKEKPT.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{D as T,Gb as s,Hb as q,I as o,Ib as k,J as u,Ja as j,Ka as w,Kb as M,Lb as U,M as V,Nb as B,Q as c,Sa as O,Sb as G,T as m,U as v,Ub as K,W as A,Wa as R,Wb as H,X as $,Y as r,Z as n,_ as p,ca as L,d as E,da as b,e as h,ea as g,h as f,i as S,n as D,p as C,pa as l,qa as I,ra as y,u as F,v as N,z as P}from"./chunk-YS7BCJTD.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var de=(()=>{let a=class a{constructor(e){this.http=e,this.apiUrl="http://127.0.0.1:3000"}getDrivers(){return E([{driver_id:1,driver_name:"Rajesh Kumar",driver_age:45,driver_license:"DL123456789",driver_number:"9876543210",driver_address:"123, MG Road, Pune",driver_status:"Active",date_of_joining:"2015-06-20",experience_years:10,vehicle_id:101,license_expiry_date:"2027-12-15",emergency_contact:"9876543211",assigned_route_id:5,d_o_b:"1979-05-12",violation:0},{driver_id:2,driver_name:"Amit Sharma",driver_age:38,driver_license:"DL987654321",driver_number:"8765432109",driver_address:"456, Baner Road, Pune",driver_status:"Inactive",date_of_joining:"2018-09-10",experience_years:6,vehicle_id:102,license_expiry_date:"2025-08-22",emergency_contact:"8765432108",assigned_route_id:null,d_o_b:"1986-02-18",violation:2}])}getVehicles(){return this.http.get(`${this.apiUrl}/getVehicles`)}createDriver(e){return this.http.post(`${this.apiUrl}/driverDetails`,e).pipe(S(1),f(this.handleError))}updateDriver(e){return this.http.put(`${this.apiUrl}/driverUpdate`,e).pipe(f(this.handleError))}deleteDriver(e){return this.http.delete(`${this.apiUrl}/driverDelete/${e}`).pipe(f(this.handleError))}handleError(e){if(e.error instanceof ErrorEvent)return console.error("An error occurred:",e.error.message),h(()=>new Error("Something went wrong. Please try again later."));{console.error(`Backend returned code ${e.status}, body was: ${e.error}`);let d="Something went wrong. Please try again later.";return e.error&&e.error.message&&(d=e.error.message),h(()=>new Error(d))}}};a.\u0275fac=function(d){return new(d||a)(C(R))},a.\u0275prov=D({token:a,factory:a.\u0275fac,providedIn:"root"});let t=a;return t})();var pe=(t,a)=>a.vehicle_id;function ve(t,a){t&1&&(r(0,"p",23),l(1,"Driver Name is required (max 255 characters)."),n())}function _e(t,a){t&1&&(r(0,"p",23),l(1,"Age must be at least 18 and a valid number."),n())}function ue(t,a){t&1&&(r(0,"p",23),l(1,"License is required (max 50 characters)."),n())}function fe(t,a){t&1&&(r(0,"p",23),l(1,"Enter a valid phone number (max 15 digits)."),n())}function ge(t,a){t&1&&(r(0,"p",23),l(1,"Address cannot exceed 255 characters)."),n())}function he(t,a){t&1&&(r(0,"p",23),l(1,"Experience must be a valid number (min 0)."),n())}function be(t,a){if(t&1&&(r(0,"ion-select-option",13),l(1),n()),t&2){let _=a.$implicit;m("value",_.vehicle_id),o(),I(_.vehicle_name)}}function Ie(t,a){t&1&&(r(0,"p",23),l(1,"Vehicle ID is required."),n())}function ye(t,a){t&1&&(r(0,"p",23),l(1,"License Expiry Date is required."),n())}function xe(t,a){t&1&&(r(0,"p",23),l(1,"Enter a valid emergency contact (max 15 digits)."),n())}function Ee(t,a){t&1&&(r(0,"p",23),l(1,"Enter valid Assigned Route ID."),n())}function Se(t,a){t&1&&(r(0,"p",23),l(1,"Violation details are required."),n())}function De(t,a){if(t&1&&(r(0,"ion-list",27)(1,"ion-item")(2,"ion-label"),l(3,"Driver License"),n(),l(4),n(),r(5,"ion-item")(6,"ion-label"),l(7,"Driver Age"),n(),l(8),n()()),t&2){let _=g().$implicit;o(4),y(": ",_.driver_license," "),o(4),y(": ",_.driver_age," ")}}function Ce(t,a){if(t&1){let _=L();r(0,"ion-item-group")(1,"ion-item",24),b("click",function(){let d=F(_).$implicit,i=g();return N(i.toggleDriver(d.driver_id))}),r(2,"ion-label")(3,"strong"),l(4),n()(),p(5,"ion-icon",25),n(),c(6,De,9,2,"ion-list",26),n()}if(t&2){let _=a.$implicit,e=g();o(4),I(_.driver_name),o(),m("name",e.expandedDrivers[_.driver_id]?"chevron-up":"chevron-down"),o(),m("ngIf",e.expandedDrivers[_.driver_id])}}var Oe=(()=>{let a=class a{constructor(e,d,i,x,se){this.fb=e,this.el=d,this.driverService=i,this.navCtrl=x,this.destroyRef=se,this.vehicle=[],this.expandedVehicle={},this.drivers=[],this.expandedDrivers={},this.driver=this.fb.group({driver_name:["",[s.required,s.maxLength(255)]],driver_age:["",[s.min(18),s.pattern("^[0-9]*$")]],driver_license:["",[s.required,s.maxLength(50)]],driver_number:["",[s.required,s.pattern("^[0-9]*$"),s.maxLength(15)]],driver_address:["",[s.maxLength(255)]],driver_status:[""],date_of_joining:[""],experience_years:["",[s.min(0),s.pattern("^[0-9]*$")]],vehicle_id:["",s.required],license_expiry_date:["",s.required],emergency_contact:["",[s.pattern("^[0-9]*$"),s.maxLength(15)]],assigned_route_id:["",[s.pattern("^[0-9]*$")]],d_o_b:[""],violation:["",s.required]})}ngOnInit(){let e=this.driverService.getVehicles().subscribe({next:i=>{console.log("Data:",i),this.vehicle=i},error:i=>{console.error("Error:",i)}});this.destroyRef.onDestroy(()=>e.unsubscribe());let d=this.driverService.getDrivers().subscribe({next:i=>{console.log("Data:",i),this.drivers=i},error:i=>{console.error("Error:",i)}});this.destroyRef.onDestroy(()=>d.unsubscribe())}isFieldInvalid(e){let d=this.driver.get(e);return!!(d&&d.invalid&&(d.dirty||d.touched))}objectKeys(e){return Object.keys(e)}submitForm(){if(this.driver.valid)console.log("Form Submitted:",this.driver.value),this.driverService.createDriver(this.driver.value).subscribe({next:e=>{console.log("Data:",e),this.driver.reset()},error:e=>{console.error("Error:",e)}});else{let e=this.el.nativeElement.querySelector(".invalid");e&&e.scrollIntoView({behavior:"smooth"})}}toggleDriver(e){this.expandedDrivers[e]=!this.expandedDrivers[e]}};a.\u0275fac=function(d){return new(d||a)(u(G),u(T),u(de),u(H),u(P))},a.\u0275cmp=V({type:a,selectors:[["app-driver"]],decls:55,vars:35,consts:[[3,"ngSubmit","formGroup"],["label","Name","labelPlacement","floating","formControlName","driver_name"],["class","error",4,"ngIf"],["label","Age (Optional)","labelPlacement","floating","type","number","formControlName","driver_age"],["label","License","labelPlacement","floating","formControlName","driver_license"],["label","Number","labelPlacement","floating","type","tel","formControlName","driver_number"],["label","Address (Optional)","labelPlacement","floating","formControlName","driver_address"],["label","Status (Optional)","formControlName","driver_status"],["value","Active"],["value","Inactive"],["label","Date of Joining (Optional)","labelPlacement","stacked","type","date","formControlName","date_of_joining"],["label","Experience Years (Optional)","position","floating","type","number","formControlName","experience_years"],["label","Vehicle","placeholder","Select a Vehicle","formControlName","vehicle_id"],[3,"value"],["label","License Expiry Date","labelPlacement","stacked","type","date","formControlName","license_expiry_date"],["label","Emergency Contact (Optional)","labelPlacement","floating","type","tel","formControlName","emergency_contact"],["label","Assigned Route ID (Optional)","labelPlacement","floating","type","number","formControlName","assigned_route_id"],["label","Date of Birth (Optional)","labelPlacement","stacked","type","date","formControlName","d_o_b"],["label","Violation","labelPlacement","floating","formControlName","violation"],[1,"center-button"],[1,"custom-button"],[1,"center-label"],[4,"ngFor","ngForOf"],[1,"error"],["button","",3,"click"],["slot","end",3,"name"],["class","nested-list",4,"ngIf"],[1,"nested-list"]],template:function(d,i){d&1&&(r(0,"ion-content")(1,"form",0),b("ngSubmit",function(){return i.submitForm()}),r(2,"ion-list")(3,"ion-item"),p(4,"ion-input",1),n(),c(5,ve,2,0,"p",2),r(6,"ion-item"),p(7,"ion-input",3),n(),c(8,_e,2,0,"p",2),r(9,"ion-item"),p(10,"ion-input",4),n(),c(11,ue,2,0,"p",2),r(12,"ion-item"),p(13,"ion-input",5),n(),c(14,fe,2,0,"p",2),r(15,"ion-item"),p(16,"ion-textarea",6),n(),c(17,ge,2,0,"p",2),r(18,"ion-item")(19,"ion-select",7)(20,"ion-select-option",8),l(21,"Active"),n(),r(22,"ion-select-option",9),l(23,"Inactive"),n()()(),r(24,"ion-item"),p(25,"ion-input",10),n(),r(26,"ion-item"),p(27,"ion-input",11),n(),c(28,he,2,0,"p",2),r(29,"ion-item")(30,"ion-select",12),A(31,be,2,2,"ion-select-option",13,pe),n()(),c(33,Ie,2,0,"p",2),r(34,"ion-item"),p(35,"ion-input",14),n(),c(36,ye,2,0,"p",2),r(37,"ion-item"),p(38,"ion-input",15),n(),c(39,xe,2,0,"p",2),r(40,"ion-item"),p(41,"ion-input",16),n(),c(42,Ee,2,0,"p",2),r(43,"ion-item"),p(44,"ion-input",17),n(),r(45,"ion-item"),p(46,"ion-textarea",18),n(),c(47,Se,2,0,"p",2),r(48,"div",19)(49,"ion-button",20),l(50," SUBMIT "),n()()(),r(51,"ion-list")(52,"ion-label",21),l(53,"AVAILABLE DRIVERS"),n(),c(54,Ce,7,3,"ion-item-group",22),n()()()),d&2&&(o(),m("formGroup",i.driver),o(2),v("invalid",i.isFieldInvalid("driver_name")),o(2),m("ngIf",i.isFieldInvalid("driver_name")),o(),v("invalid",i.isFieldInvalid("driver_age")),o(2),m("ngIf",i.isFieldInvalid("driver_age")),o(),v("invalid",i.isFieldInvalid("driver_license")),o(2),m("ngIf",i.isFieldInvalid("driver_license")),o(),v("invalid",i.isFieldInvalid("driver_number")),o(2),m("ngIf",i.isFieldInvalid("driver_number")),o(),v("invalid",i.isFieldInvalid("driver_address")),o(2),m("ngIf",i.isFieldInvalid("driver_address")),o(9),v("invalid",i.isFieldInvalid("experience_years")),o(2),m("ngIf",i.isFieldInvalid("experience_years")),o(),v("invalid",i.isFieldInvalid("vehicle_id")),o(2),$(i.vehicle),o(2),m("ngIf",i.isFieldInvalid("vehicle_id")),o(),v("invalid",i.isFieldInvalid("license_expiry_date")),o(2),m("ngIf",i.isFieldInvalid("license_expiry_date")),o(),v("invalid",i.isFieldInvalid("emergency_contact")),o(2),m("ngIf",i.isFieldInvalid("emergency_contact")),o(),v("invalid",i.isFieldInvalid("assigned_route_id")),o(2),m("ngIf",i.isFieldInvalid("assigned_route_id")),o(3),v("invalid",i.isFieldInvalid("violation")),o(2),m("ngIf",i.isFieldInvalid("violation")),o(7),m("ngForOf",i.drivers))},dependencies:[le,Q,W,X,Z,ee,ie,te,ne,re,ae,oe,J,Y,z,O,j,w,K,M,q,k,U,B],encapsulation:2});let t=a;return t})();export{Oe as DriverComponent};
