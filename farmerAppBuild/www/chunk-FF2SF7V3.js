import{C as tt,V as et,a as Y,ta as it,y as Z}from"./chunk-2E2WOBKK.js";import{A as Q,B as W,d as P,f as R,ga as X,p as q,v as H,w as z,x as J,z as K}from"./chunk-B7BKEKPT.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{D as S,Gb as T,Hb as U,I as l,Ib as V,J as p,Ja as N,Ka as A,Kb as j,Lb as M,M as _,Nb as D,Q as f,Sa as O,Sb as k,T as d,U as x,Ub as B,Wa as $,Wb as G,Y as n,Z as a,_ as h,ca as C,da as g,e as u,ea as w,h as m,n as I,p as L,pa as c,qa as F,sa as y,u as b,v as E}from"./chunk-YS7BCJTD.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var ot=(()=>{let i=class i{constructor(t){this.http=t,this.apiUrl="http://127.0.0.1:3000"}createLocation(t){return this.http.post(`${this.apiUrl}/locationDetails`,t).pipe(m(this.handleError))}updateLocation(t){return this.http.put(`${this.apiUrl}/locationUpdate`,t).pipe(m(this.handleError))}deleteLocation(t){return this.http.delete(`${this.apiUrl}/locationDelete/${t}`).pipe(m(this.handleError))}getLocations(){return this.http.get(`${this.apiUrl}/getLocations`).pipe(m(this.handleError))}handleError(t){if(t.error instanceof ErrorEvent)return console.error("An error occurred:",t.error.message),u(()=>new Error("Something went wrong. Please try again later."));{console.error(`Backend returned code ${t.status}, body was: ${t.error}`);let e="Something went wrong. Please try again later.";return t.error&&t.error.message&&(e=t.error.message),u(()=>new Error(e))}}};i.\u0275fac=function(e){return new(e||i)(L($))},i.\u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();function at(o,i){o&1&&(n(0,"p",7),c(1,"Location name cannot exceed 50 characters."),a())}function lt(o,i){if(o&1){let s=C();n(0,"ion-item"),h(1,"ion-icon",8),n(2,"ion-label")(3,"h2"),c(4),a(),n(5,"p"),c(6),a()(),n(7,"ion-button",9),g("click",function(){let e=b(s).$implicit,r=w();return E(r.deleteLocation(e.id))}),h(8,"ion-icon",10),a()()}if(o&2){let s=i.$implicit;l(4),F(s.location||"N/A"),l(2),y("",s.city_name||"N/A",", ",s.state_name||"N/A","")}}var bt=(()=>{let i=class i{constructor(t,e,r,v){this.fb=t,this.el=e,this.locationService=r,this.navCtrl=v,this.locations=[],this.isLocationListExpanded=!1,Y({trashOutline:it,chevronDown:Z,chevronUp:tt,locationOutline:et}),this.location=this.fb.group({location:["",[T.maxLength(50)]]})}ngOnInit(){this.fetchLocations()}fetchLocations(){this.locationService.getLocations().subscribe({next:t=>{this.locations=t},error:t=>{console.error("Error fetching locations:",t)}})}toggleLocationList(){this.isLocationListExpanded=!this.isLocationListExpanded}isFieldInvalid(t){let e=this.location.get(t);return!!(e&&e.invalid&&(e.dirty||e.touched))}submitForm(){if(this.location.valid)this.locationService.createLocation(this.location.value).subscribe({next:()=>{this.fetchLocations(),this.location.reset()},error:t=>{console.error("Error:",t)}});else{let t=this.el.nativeElement.querySelector(".invalid");t&&t.scrollIntoView({behavior:"smooth"})}}deleteLocation(t){this.locationService.deleteLocation(t).subscribe({next:()=>{this.fetchLocations()},error:e=>{console.error("Error deleting location:",e)}})}};i.\u0275fac=function(e){return new(e||i)(p(k),p(S),p(ot),p(G))},i.\u0275cmp=_({type:i,selectors:[["app-location"]],decls:15,vars:5,consts:[[3,"ngSubmit","formGroup"],["label","Location Name (Optional)","labelPlacement","floating","formControlName","location"],["class","error",4,"ngIf"],[1,"center-button"],[1,"custom-button"],[1,"center-label"],[4,"ngFor","ngForOf"],[1,"error"],["name","location-outline","slot","start"],["slot","end","color","danger",3,"click"],["name","trash-outline"]],template:function(e,r){e&1&&(n(0,"ion-content")(1,"form",0),g("ngSubmit",function(){return r.submitForm()}),n(2,"ion-list")(3,"ion-item"),h(4,"ion-input",1),a(),f(5,at,2,0,"p",2),n(6,"div",3)(7,"ion-button",4),c(8," SUBMIT "),a()()()(),n(9,"ion-list")(10,"ion-label",5),c(11,"AVAILABLE LOCATIONS"),a(),n(12,"ion-item-group")(13,"ion-list"),f(14,lt,9,3,"ion-item",6),a()()()()),e&2&&(l(),d("formGroup",r.location),l(2),x("invalid",r.isFieldInvalid("location")),l(2),d("ngIf",r.isFieldInvalid("location")),l(9),d("ngForOf",r.locations))},dependencies:[X,R,q,H,z,J,K,Q,W,P,O,N,A,B,j,U,V,M,D],encapsulation:2});let o=i;return o})();export{bt as LocationComponent};
