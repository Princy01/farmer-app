import{B as R,O as H,P as W,b as j,c as q,d as O,f as A,ga as Y,p as B,w as G,x as L}from"./chunk-B7BKEKPT.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{D as b,Gb as u,Hb as T,I as o,Ib as $,J as f,Ja as F,Ka as V,Kb as w,Lb as k,M as S,Nb as M,Q as s,Sa as N,Sb as x,T as m,U as h,Ub as D,Wa as P,Wb as U,Y as n,Z as l,_ as d,da as C,e as g,h as v,n as y,p as E,pa as c,qa as _}from"./chunk-YS7BCJTD.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var z=(()=>{let t=class t{constructor(e){this.http=e,this.apiUrl="http://127.0.0.1:3000"}getAllVehicles(){return this.http.get(`${this.apiUrl}/getVehicles`).pipe(v(this.handleError))}getVehicleById(e){return this.http.get(`${this.apiUrl}/getVehicles/${e}`).pipe(v(this.handleError))}createVehicle(e){return this.http.post(`${this.apiUrl}/vehicleDetails`,e).pipe(v(this.handleError))}updateVehicle(e,a){return this.http.put(`${this.apiUrl}/vehicleUpdate/${e}`,a).pipe(v(this.handleError))}deleteVehicle(e){return this.http.delete(`${this.apiUrl}/vehicleDelete/${e}`).pipe(v(this.handleError))}handleError(e){if(e.error instanceof ErrorEvent)return console.error("An error occurred:",e.error.message),g(()=>new Error("Something went wrong. Please try again later."));{console.error(`Backend returned code ${e.status}, body was: ${e.error}`);let a="Something went wrong. Please try again later.";return e.error&&e.error.message&&(a=e.error.message),g(()=>new Error(a))}}};t.\u0275fac=function(a){return new(a||t)(E(P))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function Q(i,t){i&1&&(n(0,"p",15),c(1,"Vehicle Name is required (max 255 characters)."),l())}function X(i,t){i&1&&(n(0,"p",15),c(1,"Enter valid manufacture year."),l())}function Z(i,t){if(i&1&&(n(0,"ion-select-option",16),c(1),l()),i&2){let p=t.$implicit;m("value",p.id),o(),_(p.name)}}function ee(i,t){i&1&&(n(0,"p",15),c(1,"Make is required."),l())}function ie(i,t){if(i&1&&(n(0,"ion-select-option",16),c(1),l()),i&2){let p=t.$implicit;m("value",p.id),o(),_(p.name)}}function te(i,t){i&1&&(n(0,"p",15),c(1,"Model is required."),l())}function ne(i,t){i&1&&(n(0,"p",15),c(1,"Registration No. is required."),l())}function le(i,t){if(i&1&&(n(0,"ion-select-option",16),c(1),l()),i&2){let p=t.$implicit;m("value",p.id),o(),_(p.name)}}function oe(i,t){i&1&&(n(0,"p",15),c(1,"Engine type is required."),l())}var fe=(()=>{let t=class t{constructor(e,a,r,I){this.fb=e,this.el=a,this.vehicleService=r,this.navCtrl=I,this.makes=[{id:1,name:"Toyota"},{id:2,name:"Honda"}],this.models=[{id:1,name:"Corolla"},{id:2,name:"Civic"}],this.engines=[{id:1,name:"Petrol"},{id:2,name:"Diesel"}],this.vehicle=this.fb.group({vehicle_name:["",[u.required,u.maxLength(255)]],vehicle_manufacture_year:["",[u.pattern("^[0-9]{4}$")]],vehicle_warranty:[""],vehicle_make:[""],vehicle_model:[""],vehicle_registration_no:["",[u.maxLength(50)]],vehicle_engine_type:[""],vehicle_purchase_date:[""],vehicle_color:["",[u.maxLength(50)]],vehicle_insurance_id:[""]})}isFieldInvalid(e){let a=this.vehicle.get(e);return!!(a&&a.invalid&&(a.dirty||a.touched))}submitForm(){if(this.vehicle.valid)console.log("Vehicle Data:",this.vehicle.value),this.vehicleService.createVehicle(this.vehicle.value).subscribe({next:e=>{console.log("Data:",e),this.vehicle.reset()},error:e=>{console.error("Error:",e)}});else{let e=this.el.nativeElement.querySelector(".invalid");e&&e.scrollIntoView({behavior:"smooth"})}}};t.\u0275fac=function(a){return new(a||t)(f(x),f(b),f(z),f(U))},t.\u0275cmp=S({type:t,selectors:[["app-vehicle"]],decls:35,vars:22,consts:[[3,"ngSubmit","formGroup"],["label","Name","labelPlacement","floating","formControlName","vehicle_name"],["class","error",4,"ngIf"],["label","Manufacture Year","labelPlacement","floating","type","number","formControlName","vehicle_manufacture_year"],["label","Warranty","labelPlacement","floating","formControlName","vehicle_warranty"],["label","Make","formControlName","vehicle_make"],[3,"value",4,"ngFor","ngForOf"],["label","Model","formControlName","vehicle_model"],["label","Registration No.","labelPlacement","floating","formControlName","vehicle_registration_no"],["label","Engine Type","formControlName","vehicle_engine_type"],["label","Purchase Date","labelPlacement","stacked","type","date","formControlName","vehicle_purchase_date"],["label","Color","labelPlacement","floating","formControlName","vehicle_color"],["label","Insurance ID","labelPlacement","floating","type","number","formControlName","vehicle_insurance_id"],[1,"center-button"],[1,"custom-button"],[1,"error"],[3,"value"]],template:function(a,r){a&1&&(n(0,"ion-content")(1,"form",0),C("ngSubmit",function(){return r.submitForm()}),n(2,"ion-list")(3,"ion-item"),d(4,"ion-input",1),l(),s(5,Q,2,0,"p",2),n(6,"ion-item"),d(7,"ion-input",3),l(),s(8,X,2,0,"p",2),n(9,"ion-item"),d(10,"ion-input",4),l(),n(11,"ion-item")(12,"ion-select",5),s(13,Z,2,2,"ion-select-option",6),l()(),s(14,ee,2,0,"p",2),n(15,"ion-item")(16,"ion-select",7),s(17,ie,2,2,"ion-select-option",6),l()(),s(18,te,2,0,"p",2),n(19,"ion-item"),d(20,"ion-input",8),l(),s(21,ne,2,0,"p",2),n(22,"ion-item")(23,"ion-select",9),s(24,le,2,2,"ion-select-option",6),l()(),s(25,oe,2,0,"p",2),n(26,"ion-item"),d(27,"ion-input",10),l(),n(28,"ion-item"),d(29,"ion-input",11),l(),n(30,"ion-item"),d(31,"ion-input",12),l(),n(32,"div",13)(33,"ion-button",14),c(34," SUBMIT "),l()()()()()),a&2&&(o(),m("formGroup",r.vehicle),o(2),h("invalid",r.isFieldInvalid("vehicle_name")),o(2),m("ngIf",r.isFieldInvalid("vehicle_name")),o(),h("invalid",r.isFieldInvalid("vehicle_manufacture_year")),o(2),m("ngIf",r.isFieldInvalid("vehicle_manufacture_year")),o(3),h("invalid",r.isFieldInvalid("vehicle_make")),o(2),m("ngForOf",r.makes),o(),m("ngIf",r.isFieldInvalid("vehicle_make")),o(),h("invalid",r.isFieldInvalid("vehicle_model")),o(2),m("ngForOf",r.models),o(),m("ngIf",r.isFieldInvalid("vehicle_model")),o(),h("invalid",r.isFieldInvalid("vehicle_registration_no")),o(2),m("ngIf",r.isFieldInvalid("vehicle_registration_no")),o(),h("invalid",r.isFieldInvalid("vehicle_engine_type")),o(2),m("ngForOf",r.engines),o(),m("ngIf",r.isFieldInvalid("vehicle_engine_type")))},dependencies:[Y,A,B,G,L,R,H,W,j,q,O,N,F,V,D,w,T,$,k,M],encapsulation:2});let i=t;return i})();export{fe as VehicleComponent};
