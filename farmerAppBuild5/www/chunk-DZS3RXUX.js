import{Ua as Y,a as X}from"./chunk-JT32FGMS.js";import{A as K,B as Q,d as G,f as O,fa as W,p as q,v as H,w as R,x as z,z as J}from"./chunk-I3X6JMJK.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{$ as h,Ba as w,Ca as y,Hb as c,I as s,Ib as B,J as S,Jb as P,Ka as T,La as $,Lb as V,M as C,Mb as L,Ob as j,Q as u,Qa as M,T as m,Ta as A,Tb as k,V as g,Vb as D,Xa as U,Z as n,_ as o,da as x,e as f,ea as v,fa as N,h as d,n as b,p as E,pa as l,qa as I,u as F,v as _}from"./chunk-MADRYJFV.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var Z=(()=>{let i=class i{constructor(t){this.http=t,this.apiUrl="http://127.0.0.1:3000"}getAllStates(){return this.http.get(`${this.apiUrl}/getStates`)}getStateById(t){return this.http.get(`${this.apiUrl}/getStates/${t}`)}createState(t){return this.http.post(`${this.apiUrl}/stateDetails`,t).pipe(d(this.handleError))}updateState(t){return this.http.put(`${this.apiUrl}/statesUpdate`,t).pipe(d(this.handleError))}deleteState(t){return this.http.delete(`${this.apiUrl}/stateDelete/${t}`).pipe(d(this.handleError))}handleError(t){if(t.error instanceof ErrorEvent)return console.error("An error occurred:",t.error.message),f(()=>new Error("Something went wrong. Please try again later."));{console.error(`Backend returned code ${t.status}, body was: ${t.error}`);let e="Something went wrong. Please try again later.";return t.error&&t.error.message&&(e=t.error.message),f(()=>new Error(e))}}};i.\u0275fac=function(e){return new(e||i)(E(U))},i.\u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function it(r,i){r&1&&(n(0,"p",8),l(1,"Max 50 characters allowed."),o())}function rt(r,i){r&1&&(n(0,"p",8),l(1,"Max 10 characters allowed."),o())}function nt(r,i){if(r&1){let p=x();n(0,"ion-item")(1,"ion-label")(2,"h2"),l(3),w(4,"titlecase"),o(),n(5,"p"),l(6),o()(),n(7,"ion-button",9),v("click",function(){let e=F(p).$implicit,a=N();return _(a.deleteState(e.id))}),h(8,"ion-icon",10),o()()}if(r&2){let p=i.$implicit;s(3),I(y(4,2,p.state)),s(3),I(p.stateShortNames)}}var vt=(()=>{let i=class i{constructor(t,e){this.fb=t,this.stateService=e,this.states=[],X({trashOutline:Y}),this.stateForm=this.fb.group({state:["",[c.required,c.maxLength(50)]],stateShortNames:["",[c.required,c.maxLength(10)]]})}ngOnInit(){this.fetchStates()}fetchStates(){this.stateService.getAllStates().subscribe({next:t=>{this.states=t},error:t=>console.error("Error fetching states:",t)})}isFieldInvalid(t){let e=this.stateForm.get(t);return!!(e&&e.invalid&&(e.dirty||e.touched))}submitForm(){this.stateForm.valid&&this.stateService.createState(this.stateForm.value).subscribe({next:()=>{this.fetchStates(),this.stateForm.reset()},error:t=>console.error("Error inserting state:",t)})}deleteState(t){this.stateService.deleteState(t).subscribe({next:()=>this.fetchStates(),error:e=>console.error("Error deleting state:",e)})}};i.\u0275fac=function(e){return new(e||i)(S(k),S(Z))},i.\u0275cmp=C({type:i,selectors:[["app-state"]],decls:17,vars:8,consts:[[3,"ngSubmit","formGroup"],["label","State Name","labelPlacement","floating","formControlName","state"],["class","error",4,"ngIf"],["label","State Short Name","labelPlacement","floating","formControlName","stateShortNames"],[1,"center-button"],["type","submit",1,"custom-button"],[1,"center-label"],[4,"ngFor","ngForOf"],[1,"error"],["slot","end","color","danger",3,"click"],["name","trash-outline"]],template:function(e,a){e&1&&(n(0,"ion-content")(1,"form",0),v("ngSubmit",function(){return a.submitForm()}),n(2,"ion-list")(3,"ion-item"),h(4,"ion-input",1),o(),u(5,it,2,0,"p",2),n(6,"ion-item"),h(7,"ion-input",3),o(),u(8,rt,2,0,"p",2),n(9,"div",4)(10,"ion-button",5),l(11,"SUBMIT"),o()()()(),n(12,"ion-list")(13,"ion-label",6),l(14,"AVAILABLE STATES"),o(),n(15,"ion-item-group"),u(16,nt,9,4,"ion-item",7),o()()()),e&2&&(s(),m("formGroup",a.stateForm),s(2),g("invalid",a.isFieldInvalid("state")),s(2),m("ngIf",a.isFieldInvalid("state")),s(),g("invalid",a.isFieldInvalid("stateShortNames")),s(2),m("ngIf",a.isFieldInvalid("stateShortNames")),s(8),m("ngForOf",a.states))},dependencies:[W,O,q,H,R,z,J,K,Q,G,A,T,$,M,D,V,B,P,L,j],encapsulation:2});let r=i;return r})();export{vt as StateComponent};
