import{B as V,O as w,P as R,S as k,c as D,d as L,f as j,fa as H,p as O,w as A,x as G}from"./chunk-I3X6JMJK.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{$ as b,D as I,Hb as d,I as n,Ib as N,J as _,Jb as T,Ka as B,La as C,Lb as q,M as S,Mb as P,Ob as x,Q as p,T as r,Ta as F,Tb as $,V as c,Vb as U,Xa as E,Xb as M,Z as s,_ as a,ea as y,n as h,p as g,pa as m,qa as f}from"./chunk-MADRYJFV.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var z=(()=>{let t=class t{constructor(i){this.http=i,this.baseUrl="http://localhost:3000"}getBusinesses(){return this.http.get(`${this.baseUrl}/getBusinesses`)}insertBusiness(i){return this.http.post(`${this.baseUrl}/businessDetails`,i)}getBusinessById(i){return this.http.get(`${this.baseUrl}/${i}`)}updateBusiness(i){return this.http.put(`${this.baseUrl}/businessUpdate`,i)}getBusinessTypes(){return this.http.get(`${this.baseUrl}/getBusinessStatus`)}getLocations(){return this.http.get(`${this.baseUrl}/getLocations`)}getStates(){return this.http.get(`${this.baseUrl}/getStates`)}getMandis(){return this.http.get(`${this.baseUrl}/getMandis`)}};t.\u0275fac=function(l){return new(l||t)(g(E))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Q(e,t){e&1&&(s(0,"p",15),m(1,"Business Name is required."),a())}function W(e,t){if(e&1&&(s(0,"ion-select-option",16),m(1),a()),e&2){let u=t.$implicit;r("value",u.b_typeid),n(),f(u.name)}}function X(e,t){e&1&&(s(0,"p",15),m(1,"Business Type is required."),a())}function Y(e,t){if(e&1&&(s(0,"ion-select-option",16),m(1),a()),e&2){let u=t.$implicit;r("value",u.id),n(),f(u.location)}}function Z(e,t){e&1&&(s(0,"p",15),m(1,"Location is required."),a())}function ee(e,t){if(e&1&&(s(0,"ion-select-option",16),m(1),a()),e&2){let u=t.$implicit;r("value",u.id),n(),f(u.name)}}function ie(e,t){e&1&&(s(0,"p",15),m(1,"State is required."),a())}function te(e,t){if(e&1&&(s(0,"ion-select-option",16),m(1),a()),e&2){let u=t.$implicit;r("value",u.mandi_id),n(),f(u.name)}}function ne(e,t){e&1&&(s(0,"p",15),m(1,"Address is required."),a())}function se(e,t){e&1&&(s(0,"p",15),m(1,"Valid Email is required."),a())}function oe(e,t){e&1&&(s(0,"p",15),m(1,"GST Number is required."),a())}function ae(e,t){e&1&&(s(0,"p",15),m(1,"PAN Number is required."),a())}var _e=(()=>{let t=class t{constructor(i,l,o,v){this.fb=i,this.el=l,this.businessService=o,this.navCtrl=v,this.mandis=[],this.states=[],this.locations=[],this.businessTypes=[],this.businesses=[],this.business=this.fb.group({b_typeid:["",d.required],b_name:["",d.required],b_location_id:["",d.required],b_state_id:["",d.required],b_mandiid:[""],b_address:["",d.required],b_phone_num:[""],b_email:["",[d.required,d.email]],b_gstnum:["",[d.required,d.maxLength(20)]],b_pannum:["",[d.required,d.maxLength(10)]]}),this.loadDropdownData(),this.loadBusinesses()}loadBusinesses(){this.businessService.getBusinesses().subscribe({next:i=>this.businesses=i,error:i=>console.error("Error fetching businesses:",i)})}isFieldInvalid(i){let l=this.business.get(i);return!!(l&&l.invalid&&(l.dirty||l.touched))}submitForm(){if(this.business.valid)this.businessService.insertBusiness(this.business.value).subscribe({next:()=>{console.log("Business added successfully"),this.business.reset(),this.loadBusinesses()},error:i=>console.error("Error:",i)});else{let i=this.el.nativeElement.querySelector(".ng-invalid");i&&i.scrollIntoView({behavior:"smooth"})}}updateBusiness(i){this.businessService.updateBusiness(i).subscribe({next:()=>{console.log("Business updated successfully"),this.loadBusinesses()},error:l=>console.error("Error:",l)})}loadDropdownData(){this.businessService.getBusinessTypes().subscribe(i=>this.businessTypes=i),this.businessService.getLocations().subscribe(i=>this.locations=i),this.businessService.getStates().subscribe(i=>this.states=i),this.businessService.getMandis().subscribe(i=>this.mandis=i)}};t.\u0275fac=function(l){return new(l||t)(_($),_(I),_(z),_(M))},t.\u0275cmp=S({type:t,selectors:[["app-business"]],decls:38,vars:29,consts:[[3,"ngSubmit","formGroup"],["label","Name","labelPlacement","floating","formControlName","b_name"],["class","error",4,"ngIf"],["label","Type","formControlName","b_typeid"],[3,"value",4,"ngFor","ngForOf"],["label","Location","formControlName","b_location_id"],["label","State","formControlName","b_state_id"],["label","Mandi","formControlName","b_mandi_id"],["label","Address","labelPlacement","floating","formControlName","b_address"],["label","Phone Number","labelPlacement","floating","formControlName","b_phone_num"],["label","Email","labelPlacement","floating","type","email","formControlName","b_email"],["label","GST Number","labelPlacement","floating","formControlName","b_gst_num"],["label","PAN Number","labelPlacement","floating","formControlName","b_pan_num"],[1,"center-button"],["type","submit",1,"custom-button"],[1,"error"],[3,"value"]],template:function(l,o){l&1&&(s(0,"ion-content")(1,"form",0),y("ngSubmit",function(){return o.submitForm()}),s(2,"ion-list")(3,"ion-item"),b(4,"ion-input",1),a(),p(5,Q,2,0,"p",2),s(6,"ion-item")(7,"ion-select",3),p(8,W,2,2,"ion-select-option",4),a()(),p(9,X,2,0,"p",2),s(10,"ion-item")(11,"ion-select",5),p(12,Y,2,2,"ion-select-option",4),a()(),p(13,Z,2,0,"p",2),s(14,"ion-item")(15,"ion-select",6),p(16,ee,2,2,"ion-select-option",4),a()(),p(17,ie,2,0,"p",2),s(18,"ion-item")(19,"ion-select",7),p(20,te,2,2,"ion-select-option",4),a()(),s(21,"ion-item"),b(22,"ion-textarea",8),a(),p(23,ne,2,0,"p",2),s(24,"ion-item"),b(25,"ion-input",9),a(),s(26,"ion-item"),b(27,"ion-input",10),a(),p(28,se,2,0,"p",2),s(29,"ion-item"),b(30,"ion-input",11),a(),p(31,oe,2,0,"p",2),s(32,"ion-item"),b(33,"ion-input",12),a(),p(34,ae,2,0,"p",2),s(35,"div",13)(36,"ion-button",14),m(37," SUBMIT "),a()()()()()),l&2&&(n(),r("formGroup",o.business),n(2),c("invalid",o.isFieldInvalid("b_name")),n(2),r("ngIf",o.isFieldInvalid("b_name")),n(),c("invalid",o.isFieldInvalid("b_typeid")),n(2),r("ngForOf",o.businessTypes),n(),r("ngIf",o.isFieldInvalid("b_typeid")),n(),c("invalid",o.isFieldInvalid("b_location_id")),n(2),r("ngForOf",o.locations),n(),r("ngIf",o.isFieldInvalid("b_location_id")),n(),c("invalid",o.isFieldInvalid("b_state_id")),n(2),r("ngForOf",o.states),n(),r("ngIf",o.isFieldInvalid("b_state_id")),n(3),r("ngForOf",o.mandis),n(),c("invalid",o.isFieldInvalid("b_address")),n(2),r("ngIf",o.isFieldInvalid("b_address")),n(3),c("invalid",o.isFieldInvalid("b_email")),n(2),r("ngIf",o.isFieldInvalid("b_email")),n(),c("invalid",o.isFieldInvalid("b_gst_num")),n(2),r("ngIf",o.isFieldInvalid("b_gst_num")),n(),c("invalid",o.isFieldInvalid("b_pan_num")),n(2),r("ngIf",o.isFieldInvalid("b_pan_num")))},dependencies:[H,j,O,A,G,V,w,R,k,D,L,F,B,C,U,q,N,T,P,x],encapsulation:2});let e=t;return e})();export{_e as BusinessComponent};
