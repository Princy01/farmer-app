import{E as te,I as ne,Ua as re,a as ie,ha as ae}from"./chunk-JT32FGMS.js";import{A as W,B as X,D as Y,S as Z,b as B,d as G,f as R,fa as ee,p as H,v as z,w as J,x as K,z as Q}from"./chunk-I3X6JMJK.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{$ as c,$a as q,D as y,Hb as d,I as r,Ib as w,J as h,Jb as A,Ka as N,La as P,Lb as D,M,Mb as $,Ob as j,Q as p,Sb as O,T as s,Ta as L,Tb as U,V as u,Vb as V,Xa as T,Xb as k,Z as i,_ as t,e as _,ea as C,h as g,n as E,p as S,pa as m,qa as x,ra as v,sa as F}from"./chunk-MADRYJFV.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var oe=(()=>{let a=class a{constructor(e){this.http=e,this.apiUrl="http://127.0.0.1:3000"}createMandi(e){return this.http.post(`${this.apiUrl}/mandiDetails`,e).pipe(g(this.handleError))}updateMandi(e){return this.http.put(`${this.apiUrl}/mandiUpdate`,e).pipe(g(this.handleError))}deleteMandi(e){return this.http.delete(`${this.apiUrl}/mandiDelete/${e}`).pipe(g(this.handleError))}getAllMandis(){return this.http.get(`${this.apiUrl}/getMandiDetails`)}handleError(e){if(e.error instanceof ErrorEvent)return console.error("An error occurred:",e.error.message),_(()=>new Error("Something went wrong. Please try again later."));{console.error(`Backend returned code ${e.status}, body was: ${e.error}`);let l="Something went wrong. Please try again later.";return e.error&&e.error.message&&(l=e.error.message),_(()=>new Error(l))}}};a.\u0275fac=function(l){return new(l||a)(S(T))},a.\u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();function se(n,a){n&1&&(i(0,"p",15),m(1,"Mandi Location is required (max 255 characters)."),t())}function ce(n,a){n&1&&(i(0,"p",15),m(1,"Mandi Number is required (max 50 characters)."),t())}function pe(n,a){n&1&&(i(0,"p",15),m(1,"Mandi Incharge is required (max 255 characters)."),t())}function ue(n,a){n&1&&(i(0,"p",15),m(1,"Enter a valid contact number (max 15 digits)."),t())}function fe(n,a){n&1&&(i(0,"p",15),m(1,"Enter a valid pincode (6 digits)."),t())}function he(n,a){n&1&&(i(0,"p",15),m(1,"City ID is required."),t())}function ge(n,a){n&1&&(i(0,"p",15),m(1,"State ID is required."),t())}function ve(n,a){if(n&1&&(i(0,"ion-item")(1,"ion-label")(2,"h2"),m(3),t(),i(4,"p"),c(5,"ion-icon",16),m(6),t(),i(7,"p"),m(8),t(),i(9,"p"),m(10),t()(),i(11,"ion-note",17),m(12),t()()),n&2){let f=a.$implicit;r(3),x(f.mandi_location),r(3),F(" ",f.city_name,", ",f.state_name," "),r(2),v("Incharge: ",f.mandi_incharge,""),r(2),v("Contact: ",f.mandi_incharge_num,""),r(2),v(" PIN: ",f.mandi_pincode," ")}}var Te=(()=>{let a=class a{constructor(e,l,o,I,le){this.fb=e,this.el=l,this.mandiService=o,this.navCtrl=I,this.route=le,this.mandis=[],this.isMandiListExpanded=!1,ie({chevronDown:te,chevronUp:ne,trashOutline:re,locationOutline:ae}),this.mandi=this.fb.group({mandi_location:["",[d.required,d.maxLength(255)]],mandi_number:["",[d.required,d.maxLength(50)]],mandi_incharge:["",[d.required,d.maxLength(255)]],mandi_incharge_num:["",[d.required,d.pattern("^[0-9]*$"),d.maxLength(15)]],mandi_pincode:["",[d.required,d.pattern("^[0-9]{6}$")]],mandi_address:[""],mandi_city:[null],mandi_state:[null],remarks:[""]}),this.route.queryParams.subscribe(b=>{b.mandi_city&&this.mandi.patchValue({mandi_city:b.mandi_city})})}ngOnInit(){this.fetchMandis()}fetchMandis(){this.mandiService.getAllMandis().subscribe({next:e=>{this.mandis=e},error:e=>{console.error("Error fetching mandis:",e)}})}toggleMandiList(){this.isMandiListExpanded=!this.isMandiListExpanded}isFieldInvalid(e){let l=this.mandi.get(e);return!!(l&&l.invalid&&(l.dirty||l.touched))}submitForm(){this.mandi.valid&&this.mandiService.createMandi(this.mandi.value).subscribe({next:()=>{this.fetchMandis(),this.mandi.reset()},error:e=>{console.error("Error:",e)}})}};a.\u0275fac=function(l){return new(l||a)(h(U),h(y),h(oe),h(k),h(q))},a.\u0275cmp=M({type:a,selectors:[["app-mandi"]],decls:37,vars:24,consts:[[3,"ngSubmit","formGroup"],["label","Location","labelPlacement","floating","formControlName","mandi_location"],["class","error",4,"ngIf"],["label","Number","labelPlacement","floating","formControlName","mandi_number"],["label","Incharge","labelPlacement","floating","formControlName","mandi_incharge"],["label","Incharge Contact","labelPlacement","floating","type","tel","formControlName","mandi_incharge_num"],["label","Pincode","labelPlacement","floating","type","text","maxlength","6","formControlName","mandi_pincode"],["label","Address (Optional)","labelPlacement","floating","formControlName","mandi_address"],["label","City","labelPlacement","floating","type","number","formControlName","mandi_city"],["label","State","labelPlacement","floating","type","number","formControlName","mandi_state"],["label","Remarks (Optional)","labelPlacement","floating","formControlName","remarks"],[1,"center-button"],["type","submit",1,"custom-button",3,"disabled"],[1,"center-label"],[4,"ngFor","ngForOf"],[1,"error"],["name","location-outline"],["slot","end","color","medium"]],template:function(l,o){l&1&&(i(0,"ion-content")(1,"form",0),C("ngSubmit",function(){return o.submitForm()}),i(2,"ion-list")(3,"ion-item"),c(4,"ion-input",1),t(),p(5,se,2,0,"p",2),i(6,"ion-item"),c(7,"ion-input",3),t(),p(8,ce,2,0,"p",2),i(9,"ion-item"),c(10,"ion-input",4),t(),p(11,pe,2,0,"p",2),i(12,"ion-item"),c(13,"ion-input",5),t(),p(14,ue,2,0,"p",2),i(15,"ion-item"),c(16,"ion-input",6),t(),p(17,fe,2,0,"p",2),i(18,"ion-item"),c(19,"ion-textarea",7),t(),i(20,"ion-item"),c(21,"ion-input",8),t(),p(22,he,2,0,"p",2),i(23,"ion-item"),c(24,"ion-input",9),t(),p(25,ge,2,0,"p",2),i(26,"ion-item"),c(27,"ion-textarea",10),t(),i(28,"div",11)(29,"ion-button",12),m(30," SUBMIT "),t()()()(),i(31,"ion-list")(32,"ion-label",13),m(33,"AVAILABLE MANDIS"),t(),i(34,"ion-item-group")(35,"ion-list"),p(36,ve,13,6,"ion-item",14),t()()()()),l&2&&(r(),s("formGroup",o.mandi),r(2),u("invalid",o.isFieldInvalid("mandi_location")),r(2),s("ngIf",o.isFieldInvalid("mandi_location")),r(),u("invalid",o.isFieldInvalid("mandi_number")),r(2),s("ngIf",o.isFieldInvalid("mandi_number")),r(),u("invalid",o.isFieldInvalid("mandi_incharge")),r(2),s("ngIf",o.isFieldInvalid("mandi_incharge")),r(),u("invalid",o.isFieldInvalid("mandi_incharge_num")),r(2),s("ngIf",o.isFieldInvalid("mandi_incharge_num")),r(),u("invalid",o.isFieldInvalid("mandi_pincode")),r(2),s("ngIf",o.isFieldInvalid("mandi_pincode")),r(3),u("invalid",o.isFieldInvalid("mandi_city")),r(2),s("ngIf",o.isFieldInvalid("mandi_city")),r(),u("invalid",o.isFieldInvalid("mandi_state")),r(2),s("ngIf",o.isFieldInvalid("mandi_state")),r(4),s("disabled",o.mandi.invalid),r(7),s("ngForOf",o.mandis))},dependencies:[ee,R,H,z,J,K,Q,W,X,Y,Z,B,G,L,N,P,V,D,w,A,O,$,j],encapsulation:2});let n=a;return n})();export{Te as MandiComponent};
