import{Ja as fe,Oa as _e,Pa as he,Q as le,R as ae,S as se,T as me,a as ie,ia as de,ja as ce,la as ge,p as oe,s as re,ta as pe,wa as ue}from"./chunk-JT32FGMS.js";import{A as K,M as Q,N as X,O as ee,P as te,c as Y,d as B,f as U,fa as ne,p as Z,v as $,w as H,x as J}from"./chunk-I3X6JMJK.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{$ as g,Hb as f,I as a,Ib as q,J as b,Jb as z,Ka as k,Kb as R,La as E,Lb as A,M as y,Mb as N,Ob as W,Q as p,T as s,Ta as L,Tb as j,Ub as D,Vb as G,Xa as T,Z as i,_ as o,bb as V,da as w,ea as x,fa as u,n as C,p as O,pa as m,ra as M,u as h,v,va as S,wa as F,xa as I}from"./chunk-MADRYJFV.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var ve=(()=>{let l=class l{constructor(n){this.http=n,this.apiUrl="http://127.0.0.1:3000"}login(n){return this.http.post(`${this.apiUrl}/InsertLoginCredentials`,n)}registerUser(n){return this.http.post(`${this.apiUrl}/userTableDetails`,n)}};l.\u0275fac=function(t){return new(t||l)(O(T))},l.\u0275prov=C({token:l,factory:l.\u0275fac,providedIn:"root"});let e=l;return e})();function Pe(e,l){e&1&&(i(0,"span"),m(1,"Email or phone is required"),o())}function we(e,l){e&1&&(i(0,"span"),m(1,"Please enter a valid email"),o())}function Ce(e,l){if(e&1&&(i(0,"div",33),p(1,Pe,2,0,"span",34)(2,we,2,0,"span",34),o()),e&2){let r,n,t=u(2);a(),s("ngIf",(r=t.loginForm.get("emailOrPhone"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(n=t.loginForm.get("emailOrPhone"))==null||n.errors==null?null:n.errors.invalidFormat)}}function Oe(e,l){e&1&&(i(0,"span"),m(1,"Password is required"),o())}function ye(e,l){e&1&&(i(0,"span"),m(1,"Password must be at least 6 characters"),o())}function Me(e,l){if(e&1&&(i(0,"div",33),p(1,Oe,2,0,"span",34)(2,ye,2,0,"span",34),o()),e&2){let r,n,t=u(2);a(),s("ngIf",(r=t.loginForm.get("password"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(n=t.loginForm.get("password"))==null||n.errors==null?null:n.errors.minlength)}}function Se(e,l){if(e&1){let r=w();i(0,"div",19)(1,"form",20),x("ngSubmit",function(){h(r);let t=u();return v(t.onLogin())}),i(2,"div",21)(3,"ion-item",22),g(4,"ion-icon",23)(5,"ion-input",24),o(),p(6,Ce,3,2,"div",25),o(),i(7,"div",21)(8,"ion-item",22),g(9,"ion-icon",26)(10,"ion-input",27),i(11,"ion-icon",28),x("click",function(){h(r);let t=u();return v(t.toggleLoginPasswordVisibility())}),o()(),p(12,Me,3,2,"div",25),o(),i(13,"div",29)(14,"a",30),m(15,"Forgot Password?"),o()(),i(16,"ion-button",31),g(17,"ion-icon",32),m(18," Sign In "),o()()()}if(e&2){let r,n,t=u();a(),s("formGroup",t.loginForm),a(5),s("ngIf",((r=t.loginForm.get("emailOrPhone"))==null?null:r.touched)&&((r=t.loginForm.get("emailOrPhone"))==null?null:r.errors)),a(4),s("type",t.showLoginPassword?"text":"password"),a(),s("name",t.showLoginPassword?"eye-off-outline":"eye-outline"),a(),s("ngIf",((n=t.loginForm.get("password"))==null?null:n.touched)&&((n=t.loginForm.get("password"))==null?null:n.errors)),a(4),s("disabled",t.loginForm.invalid)}}function Fe(e,l){e&1&&(i(0,"div",33),m(1," Full name is required "),o())}function Ie(e,l){e&1&&(i(0,"span"),m(1,"Email or phone is required"),o())}function ke(e,l){e&1&&(i(0,"span"),m(1,"Please enter a valid email"),o())}function Ee(e,l){if(e&1&&(i(0,"div",33),p(1,Ie,2,0,"span",34)(2,ke,2,0,"span",34),o()),e&2){let r,n,t=u(2);a(),s("ngIf",(r=t.registerForm.get("emailOrPhone"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(n=t.registerForm.get("emailOrPhone"))==null||n.errors==null?null:n.errors.invalidFormat)}}function Le(e,l){e&1&&(i(0,"span"),m(1,"Password is required"),o())}function Te(e,l){e&1&&(i(0,"span"),m(1,"Password must be at least 6 characters"),o())}function Ve(e,l){if(e&1&&(i(0,"div",33),p(1,Le,2,0,"span",34)(2,Te,2,0,"span",34),o()),e&2){let r,n,t=u(2);a(),s("ngIf",(r=t.registerForm.get("password"))==null||r.errors==null?null:r.errors.required),a(),s("ngIf",(n=t.registerForm.get("password"))==null||n.errors==null?null:n.errors.minlength)}}function qe(e,l){if(e&1&&(i(0,"ion-select-option",42),m(1),o()),e&2){let r=l.$implicit;s("value",r.id),a(),M(" ",r.name," ")}}function ze(e,l){e&1&&(i(0,"div",33),m(1," Please select your role "),o())}function Re(e,l){if(e&1){let r=w();i(0,"div",19)(1,"form",20),x("ngSubmit",function(){h(r);let t=u();return v(t.onRegisterSubmit())}),i(2,"div",21)(3,"ion-item",22),g(4,"ion-icon",35)(5,"ion-input",36),o(),p(6,Fe,2,0,"div",25),o(),i(7,"div",21)(8,"ion-item",22),g(9,"ion-icon",23)(10,"ion-input",24),o(),p(11,Ee,3,2,"div",25),o(),i(12,"div",21)(13,"ion-item",22),g(14,"ion-icon",26)(15,"ion-input",27),i(16,"ion-icon",28),x("click",function(){h(r);let t=u();return v(t.toggleRegisterPasswordVisibility())}),o()(),p(17,Ve,3,2,"div",25),o(),i(18,"div",21)(19,"ion-item",22),g(20,"ion-icon",37),i(21,"ion-select",38),p(22,qe,2,2,"ion-select-option",39),o()(),p(23,ze,2,0,"div",25),o(),i(24,"ion-button",40),g(25,"ion-icon",41),m(26," Create Account "),o()()()}if(e&2){let r,n,t,d,c=u();a(),s("formGroup",c.registerForm),a(5),s("ngIf",((r=c.registerForm.get("name"))==null?null:r.touched)&&((r=c.registerForm.get("name"))==null||r.errors==null?null:r.errors.required)),a(5),s("ngIf",((n=c.registerForm.get("emailOrPhone"))==null?null:n.touched)&&((n=c.registerForm.get("emailOrPhone"))==null?null:n.errors)),a(4),s("type",c.showRegisterPassword?"text":"password"),a(),s("name",c.showRegisterPassword?"eye-off-outline":"eye-outline"),a(),s("ngIf",((t=c.registerForm.get("password"))==null?null:t.touched)&&((t=c.registerForm.get("password"))==null?null:t.errors)),a(5),s("ngForOf",c.userRoles),a(),s("ngIf",((d=c.registerForm.get("role"))==null?null:d.touched)&&((d=c.registerForm.get("role"))==null||d.errors==null?null:d.errors.required)),a(),s("disabled",c.registerForm.invalid)}}var _=function(e){return e[e.Admin=1]="Admin",e[e.Wholesaler=2]="Wholesaler",e[e.Retailer=3]="Retailer",e}(_||{}),$e=(()=>{let l=class l{constructor(n,t,d){this.fb=n,this.router=t,this.authService=d,this.authMode="login",this.showLoginPassword=!1,this.showRegisterPassword=!1,this.userRoles=[{id:_.Wholesaler,name:"Wholesaler"},{id:_.Retailer,name:"Retailer"}],ie({eye:le,eyeOff:ae,eyeOutline:me,eyeOffOutline:se,mailOutline:ge,lockClosedOutline:de,personOutline:ue,businessOutline:oe,storefrontOutline:he,storefront:_e,carOutline:re,shieldCheckmarkOutline:fe,logInOutline:ce,personAddOutline:pe}),this.loginForm=this.fb.group({emailOrPhone:["",[f.required,this.emailValidator]],password:["",[f.required,f.minLength(6)]]}),this.registerForm=this.fb.group({name:["",f.required],emailOrPhone:["",[f.required,this.emailValidator]],password:["",[f.required,f.minLength(6)]],role:["",f.required]})}toggleLoginPasswordVisibility(){this.showLoginPassword=!this.showLoginPassword}toggleRegisterPasswordVisibility(){this.showRegisterPassword=!this.showRegisterPassword}emailValidator(n){let t=n.value;return t?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t)?null:{invalidFormat:!0}:{required:!0}}onLogin(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let n={email:this.loginForm.value.emailOrPhone,password:this.loginForm.value.password};this.authService.login(n).subscribe({next:t=>{switch(t.role_id){case _.Admin:this.router.navigate(["/admin/driver"]);break;case _.Wholesaler:this.router.navigate(["/wholesaler/home"]);break;case _.Retailer:this.router.navigate(["/buyer/buyer-home"]);break;default:console.error("Unknown role")}},error:t=>{console.error("Login failed:",t)}})}onRegisterSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let n=this.registerForm.value,t={name:n.name,mobile_num:n.emailOrPhone,email:n.emailOrPhone.includes("@")?n.emailOrPhone:"",address:"Default Address",pincode:"000000",location:1,state:1,active_status:1,role_id:n.role};this.authService.registerUser(t).subscribe({next:d=>{console.log("Registration successful:",d),this.authMode="login"},error:d=>{console.error("Registration failed:",d)}})}};l.\u0275fac=function(t){return new(t||l)(b(j),b(V),b(ve))},l.\u0275cmp=y({type:l,selectors:[["app-login"]],decls:33,vars:3,consts:[[1,"login-content"],[1,"background-overlay"],[1,"login-container"],[1,"header-section"],[1,"logo-container"],["name","storefront",1,"app-logo"],[1,"app-title"],[1,"app-subtitle"],[1,"segment-container"],["value","login",1,"custom-segment",3,"ngModelChange","ngModel"],["value","login",1,"segment-button"],["value","register",1,"segment-button"],["class","form-container",4,"ngIf"],[1,"features-section"],[1,"feature-item"],["name","storefront-outline",1,"feature-icon"],[1,"feature-text"],["name","car-outline",1,"feature-icon"],["name","shield-checkmark-outline",1,"feature-icon"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"input-group"],["lines","none",1,"custom-input"],["name","mail-outline","slot","start",1,"input-icon"],["placeholder","Email or Phone","formControlName","emailOrPhone",1,"input-field"],["class","error-message",4,"ngIf"],["name","lock-closed-outline","slot","start",1,"input-icon"],["placeholder","Password","formControlName","password",1,"input-field",3,"type"],["slot","end",1,"password-toggle",3,"click","name"],[1,"forgot-password-container"],[1,"forgot-password-link"],["type","submit","expand","block",1,"login-button",3,"disabled"],["name","log-in-outline","slot","start"],[1,"error-message"],[4,"ngIf"],["name","person-outline","slot","start",1,"input-icon"],["placeholder","Full Name","formControlName","name",1,"input-field"],["name","business-outline","slot","start",1,"input-icon"],["placeholder","Select Your Role","formControlName","role",1,"role-select"],[3,"value",4,"ngFor","ngForOf"],["type","submit","expand","block",1,"register-button",3,"disabled"],["name","person-add-outline","slot","start"],[3,"value"]],template:function(t,d){t&1&&(i(0,"ion-content",0),g(1,"div",1),i(2,"div",2)(3,"div",3)(4,"div",4),g(5,"ion-icon",5),o(),i(6,"h1",6),m(7,"FarmerApp"),o(),i(8,"p",7),m(9,"Connecting Wholesalers & Retailers"),o()(),i(10,"div",8)(11,"ion-segment",9),I("ngModelChange",function(P){return F(d.authMode,P)||(d.authMode=P),P}),i(12,"ion-segment-button",10)(13,"ion-label"),m(14,"Sign In"),o()(),i(15,"ion-segment-button",11)(16,"ion-label"),m(17,"Sign Up"),o()()()(),p(18,Se,19,6,"div",12)(19,Re,27,9,"div",12),i(20,"div",13)(21,"div",14),g(22,"ion-icon",15),i(23,"span",16),m(24,"Wholesale to Retail"),o()(),i(25,"div",14),g(26,"ion-icon",17),i(27,"span",16),m(28,"Fast Delivery"),o()(),i(29,"div",14),g(30,"ion-icon",18),i(31,"span",16),m(32,"Secure Platform"),o()()()()()),t&2&&(a(11),S("ngModel",d.authMode),a(7),s("ngIf",d.authMode==="login"),a(),s("ngIf",d.authMode==="register"))},dependencies:[L,k,E,D,A,q,z,R,G,N,W,ne,U,Z,$,H,J,K,Q,X,ee,te,Y,B],styles:[".login-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, rgb(214, 249, 218) 0%, rgb(145, 212, 153) 100%);position:relative}.background-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0000004d;z-index:-1}.login-container[_ngcontent-%COMP%]{padding:2rem 1.5rem;min-height:100vh;display:flex;flex-direction:column;justify-content:center;max-width:400px;margin:0 auto}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-container[_ngcontent-%COMP%]{margin-bottom:1rem}.app-logo[_ngcontent-%COMP%]{font-size:4rem;color:#fff;filter:drop-shadow(0 4px 8px rgba(0,0,0,.3))}.app-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#fff;margin:.5rem 0;text-shadow:0 2px 4px rgba(0,0,0,.3);letter-spacing:-.5px}.app-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#ffffffe6;margin:0;font-weight:300}.segment-container[_ngcontent-%COMP%]{margin-bottom:2rem}.custom-segment[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .1);--color-checked: rgb(136, 172, 140);--background-checked: #fff;border-radius:25px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.segment-button[_ngcontent-%COMP%]{--color: rgba(255, 255, 255, .8);--color-checked: rgb(102, 130, 103);font-weight:500;text-transform:none}.form-container[_ngcontent-%COMP%]{margin-bottom:2rem}.input-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.custom-input[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .95);--border-radius: 15px;--padding-start: 16px;--padding-end: 16px;--min-height: 56px;margin-bottom:.5rem;border-radius:15px;box-shadow:0 4px 12px #0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3)}.input-icon[_ngcontent-%COMP%]{color:#88ac8c;font-size:1.2rem;margin-right:12px}.input-field[_ngcontent-%COMP%]{--color: #333;--placeholder-color: #666;font-size:1rem}.password-toggle[_ngcontent-%COMP%]{color:#666;font-size:1.2rem;cursor:pointer;transition:color .3s ease}.password-toggle[_ngcontent-%COMP%]:hover{color:#88ac8c}.role-select[_ngcontent-%COMP%]{--color: #333;--placeholder-color: #666;font-size:1rem}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.875rem;margin-left:16px;margin-top:4px;font-weight:500}.forgot-password-container[_ngcontent-%COMP%]{text-align:right;margin-bottom:2rem}.forgot-password-link[_ngcontent-%COMP%]{color:#ffffffe6;font-size:.9rem;text-decoration:none;font-weight:500;transition:color .3s ease}.forgot-password-link[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:underline}.login-button[_ngcontent-%COMP%], .register-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, rgb(136, 172, 140) 0%, rgb(106, 142, 110) 100%);--background-activated: linear-gradient(135deg, rgb(116, 152, 120) 0%, rgb(96, 132, 100) 100%);--color: #fff;--border-radius: 15px;--box-shadow: 0 6px 20px rgba(136, 172, 140, .4);height:56px;font-size:1.1rem;font-weight:600;text-transform:none;letter-spacing:.5px;margin-top:1rem}.login-button[_ngcontent-%COMP%]:not([disabled]), .register-button[_ngcontent-%COMP%]:not([disabled]){--box-shadow: 0 6px 20px rgba(136, 172, 140, .4)}.login-button[disabled][_ngcontent-%COMP%], .register-button[disabled][_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .3);--color: rgba(255, 255, 255, .6);--box-shadow: none}.features-section[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin-top:2rem;padding:1.5rem 0;border-top:1px solid rgba(255,255,255,.2)}.feature-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1}.feature-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#ffffffe6;margin-bottom:.5rem}.feature-text[_ngcontent-%COMP%]{color:#fffc;font-size:.75rem;text-align:center;font-weight:500}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:1.5rem 1rem}.app-title[_ngcontent-%COMP%]{font-size:2rem}.app-logo[_ngcontent-%COMP%]{font-size:3rem}.features-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.feature-item[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-start;width:100%}.feature-icon[_ngcontent-%COMP%]{margin-right:.5rem;margin-bottom:0}}.login-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out forwards;opacity:0;transform:translateY(30px)}.header-section[_ngcontent-%COMP%]{animation-delay:.1s}.segment-container[_ngcontent-%COMP%]{animation-delay:.2s}.form-container[_ngcontent-%COMP%]{animation-delay:.3s}.features-section[_ngcontent-%COMP%]{animation-delay:.4s}@keyframes _ngcontent-%COMP%_fadeInUp{to{opacity:1;transform:translateY(0)}}.custom-input[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 16px #00000026;transition:all .3s ease}.login-button[_ngcontent-%COMP%]:hover:not([disabled]), .register-button[_ngcontent-%COMP%]:hover:not([disabled]){transform:translateY(-2px);--box-shadow: 0 8px 25px rgba(136, 172, 140, .5);transition:all .3s ease}"]});let e=l;return e})();export{$e as LoginPage};
