import{b as X}from"./chunk-657ITH35.js";import{A as V,B as q,Q as B,R as z,S as L,U as J,a as E,b as N,d as A,ea as Q,f as D,fa as W,h as G,p as j,w as H,x as U}from"./chunk-I3X6JMJK.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{$ as g,Hb as c,I as a,Ib as S,J as u,Jb as T,La as y,Lb as I,M,Mb as F,Ob as k,Q as f,T as m,Ta as O,Tb as w,V as x,Vb as K,Xa as R,Z as i,_ as t,ea as P,pa as r}from"./chunk-MADRYJFV.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import{h as v}from"./chunk-LNJ3S2LQ.js";function Y(n,o){n&1&&(i(0,"ion-text",16),r(1," Enter a valid price per km. "),t())}function Z(n,o){n&1&&(i(0,"ion-text",16),r(1," Enter a valid price per kg/ton. "),t())}function $(n,o){n&1&&(i(0,"ion-text",16),r(1," Fleet Capacity must be at least 50 kg. "),t())}function ee(n,o){n&1&&g(0,"ion-spinner")}function te(n,o){n&1&&(i(0,"span"),r(1,"SAVE CHANGES"),t())}var me=(()=>{let o=class o{constructor(l,s,e,d){this.fb=l,this.http=s,this.toastCtrl=e,this.databaseService=d,this.isSubmitting=!1,this.rateForm=this.fb.group({perKmRate:["",[c.required,c.min(1)]],perKgRate:["",[c.required,c.min(1)]],peakHourRate:["",[c.required,c.min(1)]],isAvailable:[!0],fleetCapacity:["",[c.required,c.min(50)]],serviceAreas:[""]});let p=this.databaseService.getTransporterRates("T001");p&&this.rateForm.patchValue({perKmRate:p.perKmRate,perKgRate:p.perKgRate,peakHourRate:p.peakHourRate})}updateRates(){return v(this,null,function*(){if(this.rateForm.invalid){this.showToast("Please fill all required fields correctly.","danger");return}this.isSubmitting=!0;let l=this.rateForm.value;this.databaseService.updateTransporterRates("T001",{perKmRate:l.perKmRate,perKgRate:l.perKgRate,peakHourRate:l.peakHourRate,lastUpdated:new Date().toISOString()})?this.showToast("Transport rates updated successfully!","success"):this.showToast("Failed to update rates. Try again.","danger"),this.isSubmitting=!1})}showToast(l,s){return v(this,null,function*(){(yield this.toastCtrl.create({message:l,duration:2e3,color:s})).present()})}};o.\u0275fac=function(s){return new(s||o)(u(w),u(R),u(Q),u(X))},o.\u0275cmp=M({type:o,selectors:[["app-transport-update-rates"]],decls:31,vars:13,consts:[[1,"ion-padding"],[3,"ngSubmit","formGroup"],[1,"toggle-card"],[1,"toggle-item"],[1,"label-text"],["formControlName","isAvailable",1,"custom-toggle"],["position","floating",1,"label-text"],["type","number","formControlName","perKmRate"],["class","error",4,"ngIf"],["type","number","formControlName","perKgRate"],["type","number","formControlName","fleetCapacity"],["position","stacked",1,"label-text"],["formControlName","serviceAreas","placeholder","e.g., Delhi, Mumbai"],[1,"center-button"],["type","submit",1,"custom-button",3,"disabled"],[4,"ngIf"],[1,"error"]],template:function(s,e){if(s&1&&(i(0,"ion-content",0)(1,"form",1),P("ngSubmit",function(){return e.updateRates()}),i(2,"ion-list")(3,"ion-card",2)(4,"ion-item",3)(5,"ion-label",4),r(6,"Available for Delivery"),t(),g(7,"ion-toggle",5),t()(),i(8,"ion-item")(9,"ion-label",6),r(10,"\u20B9 per km"),t(),g(11,"ion-input",7),t(),f(12,Y,2,0,"ion-text",8),i(13,"ion-item")(14,"ion-label",6),r(15,"\u20B9 per kg"),t(),g(16,"ion-input",9),t(),f(17,Z,2,0,"ion-text",8),i(18,"ion-item")(19,"ion-label",6),r(20,"Fleet Capacity (kg)"),t(),g(21,"ion-input",10),t(),f(22,$,2,0,"ion-text",8),i(23,"ion-item")(24,"ion-label",11),r(25,"Preferred Service Areas"),t(),g(26,"ion-textarea",12),t()(),i(27,"div",13)(28,"ion-button",14),f(29,ee,1,0,"ion-spinner",15)(30,te,2,0,"span",15),t()()()()),s&2){let d,p,C,_,b,h;a(),m("formGroup",e.rateForm),a(7),x("invalid",((d=e.rateForm.get("perKmRate"))==null?null:d.invalid)&&((d=e.rateForm.get("perKmRate"))==null?null:d.touched)),a(4),m("ngIf",((p=e.rateForm.get("perKmRate"))==null?null:p.invalid)&&((p=e.rateForm.get("perKmRate"))==null?null:p.touched)),a(),x("invalid",((C=e.rateForm.get("perKgRate"))==null?null:C.invalid)&&((C=e.rateForm.get("perKgRate"))==null?null:C.touched)),a(4),m("ngIf",((_=e.rateForm.get("perKgRate"))==null?null:_.invalid)&&((_=e.rateForm.get("perKgRate"))==null?null:_.touched)),a(),x("invalid",((b=e.rateForm.get("fleetCapacity"))==null?null:b.invalid)&&((b=e.rateForm.get("fleetCapacity"))==null?null:b.touched)),a(4),m("ngIf",((h=e.rateForm.get("fleetCapacity"))==null?null:h.invalid)&&((h=e.rateForm.get("fleetCapacity"))==null?null:h.touched)),a(6),m("disabled",e.isSubmitting),a(),m("ngIf",e.isSubmitting),a(),m("ngIf",!e.isSubmitting)}},dependencies:[W,D,G,j,H,U,V,q,B,z,L,J,E,N,A,O,y,K,I,S,T,F,k],styles:["ion-content[_ngcontent-%COMP%]{--padding-top: 20px}ion-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;font-family:Century Gothic,sans-serif}ion-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{width:90%;max-width:500px}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:10px;--inner-border-width: 0px;position:relative}ion-content[_ngcontent-%COMP%]   .toggle-card[_ngcontent-%COMP%]{padding:10px;border-radius:10px;box-shadow:0 4px 6px #0000001a;background:#fff;border:1px solid #d1d1d1}ion-content[_ngcontent-%COMP%]   .toggle-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}ion-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:5px;flex-grow:1}ion-content[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{border-bottom:1px solid lightgray;transition:border-color .3s ease;--padding-start: 10px;font-size:16px}ion-content[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#737070;font-family:Century Gothic,sans-serif}ion-content[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{padding:12px;--track-background: #ddd;--track-background-checked: #ddd;--handle-background: rgba(241, 238, 238, .968);--handle-background-checked: rgb(136, 172, 140);--handle-width: 15px;--handle-height: 27px;--handle-max-height: auto;--handle-spacing: 6px;--handle-border-radius: 4px;--handle-box-shadow: none}ion-content[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]::part(track){height:8px;width:55px;overflow:visible}ion-content[_ngcontent-%COMP%]   .center-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:20vh}ion-content[_ngcontent-%COMP%]   .custom-button[_ngcontent-%COMP%]{font-family:Georgia,Times,serif;--background: rgb(136, 172, 140);--color: white;--border-radius: 8px;--box-shadow: 0 4px 6px rgba(0, 0, 0, .1)}ion-content[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:14px;margin-left:16px}ion-content[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{border:1px solid red}"]});let n=o;return n})();export{me as TransportUpdateRatesComponent};
