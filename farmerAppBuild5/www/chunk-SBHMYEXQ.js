import{B as A,O as G,P as k,c as T,d as D,f as U,fa as R,p as $,w as B,x as L}from"./chunk-I3X6JMJK.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{$ as h,D as b,Hb as c,I as r,Ib as V,J as p,Jb as N,La as C,Lb as w,M as _,Mb as x,Ob as q,Q as u,T as s,Ta as y,Tb as P,V as v,Vb as j,Xa as F,Xb as M,Z as a,_ as l,e as f,ea as E,h as d,n as g,p as S,pa as m}from"./chunk-MADRYJFV.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var H=(()=>{let i=class i{constructor(e){this.http=e,this.apiUrl="http://127.0.0.1:3000"}createViolation(e){return this.http.post(`${this.apiUrl}/violationDetails`,e).pipe(d(this.handleError))}updateViolation(e){return this.http.put(`${this.apiUrl}/violationUpdate`,e).pipe(d(this.handleError))}deleteViolation(e){return this.http.delete(`${this.apiUrl}/violationDelete/${e}`).pipe(d(this.handleError))}handleError(e){if(e.error instanceof ErrorEvent)return console.error("An error occurred:",e.error.message),f(()=>new Error("Something went wrong. Please try again later."));{console.error(`Backend returned code ${e.status}, body was: ${e.error}`);let t="Something went wrong. Please try again later.";return e.error&&e.error.message&&(t=e.error.message),f(()=>new Error(t))}}};i.\u0275fac=function(t){return new(t||i)(S(F))},i.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();function J(o,i){o&1&&(a(0,"p",8),m(1,"Violation Name is required (max 255 characters)."),l())}function K(o,i){o&1&&(a(0,"p",8),m(1,"Level of Seriousness is required (max 255 characters)."),l())}function Q(o,i){o&1&&(a(0,"p",8),m(1,"Status is required."),l())}var ae=(()=>{let i=class i{constructor(e,t,n,I){this.fb=e,this.el=t,this.violationService=n,this.navCtrl=I,this.violation=this.fb.group({violation_name:["",[c.required,c.maxLength(255)]],level_of_serious:["",[c.required,c.maxLength(255)]],status:[1,c.required]})}isFieldInvalid(e){let t=this.violation.get(e);return!!(t&&t.invalid&&(t.dirty||t.touched))}submitForm(){if(this.violation.valid)console.log("Form Submitted:",this.violation.value),this.violationService.createViolation(this.violation.value).subscribe({next:e=>{console.log("Data:",e),this.violation.reset(),this.navCtrl.navigateBack("/admin/driver",{queryParams:{vehicle_id:e.vehicle_id}})},error:e=>{console.error("Error:",e)}});else{let e=this.el.nativeElement.querySelector(".invalid");e&&e.scrollIntoView({behavior:"smooth"})}}};i.\u0275fac=function(t){return new(t||i)(p(P),p(b),p(H),p(M))},i.\u0275cmp=_({type:i,selectors:[["app-violation"]],decls:19,vars:12,consts:[[3,"ngSubmit","formGroup"],["label","Violation Name","labelPlacement","floating","formControlName","violation_name"],["class","error",4,"ngIf"],["label","Level of Seriousness","labelPlacement","floating","formControlName","level_of_serious"],["label","Status","formControlName","status"],[3,"value"],[1,"center-button"],[1,"custom-button"],[1,"error"]],template:function(t,n){t&1&&(a(0,"ion-content")(1,"form",0),E("ngSubmit",function(){return n.submitForm()}),a(2,"ion-list")(3,"ion-item"),h(4,"ion-input",1),l(),u(5,J,2,0,"p",2),a(6,"ion-item"),h(7,"ion-input",3),l(),u(8,K,2,0,"p",2),a(9,"ion-item")(10,"ion-select",4)(11,"ion-select-option",5),m(12,"Active"),l(),a(13,"ion-select-option",5),m(14,"Inactive"),l()()(),u(15,Q,2,0,"p",2),a(16,"div",6)(17,"ion-button",7),m(18," SUBMIT "),l()()()()()),t&2&&(r(),s("formGroup",n.violation),r(2),v("invalid",n.isFieldInvalid("violation_name")),r(2),s("ngIf",n.isFieldInvalid("violation_name")),r(),v("invalid",n.isFieldInvalid("level_of_serious")),r(2),s("ngIf",n.isFieldInvalid("level_of_serious")),r(),v("invalid",n.isFieldInvalid("status")),r(2),s("value",1),r(2),s("value",0),r(2),s("ngIf",n.isFieldInvalid("status")))},dependencies:[R,U,$,B,L,A,G,k,T,D,y,C,j,w,V,N,x,q],encapsulation:2});let o=i;return o})();export{ae as ViolationComponent};
