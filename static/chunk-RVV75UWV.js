import{a as j,e as W}from"./chunk-ZSFP4GD7.js";import{a as q}from"./chunk-MLCCNMJ3.js";import{B as A,C as V,R as z,U as D,W as H,Y as N,f as E,g as T,ga as $,h as L,i as w,j as B,q as F,v as O,w as M,y as P}from"./chunk-BQTIQUN7.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{$ as _,I as c,J as I,Ka as C,La as b,M as k,Q as p,T as l,Ta as y,Z as n,_ as r,da as R,ea as S,fa as m,pa as s,qa as g,ra as h,sa as v,u,v as x}from"./chunk-SSO4CHWC.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import{h as f}from"./chunk-LNJ3S2LQ.js";function G(t,i){t&1&&(n(0,"div",5),_(1,"ion-spinner"),n(2,"p"),s(3,"Loading recommendations..."),r()())}function J(t,i){if(t&1){let o=R();n(0,"ion-card")(1,"ion-card-content",5),_(2,"ion-icon",6),n(3,"p"),s(4),r(),n(5,"ion-button",7),S("click",function(){u(o);let a=m();return x(a.loadRestockingRecommendations())}),s(6," Try Again "),r()()()}if(t&2){let o=m();c(4),g(o.error)}}function K(t,i){if(t&1&&(n(0,"li"),s(1),r()),t&2){let o=i.$implicit;c(),v(" ",o.mandi_name,": ",o.mandi_stock," kg ")}}function Q(t,i){if(t&1&&(n(0,"ion-item")(1,"ion-label")(2,"h2"),s(3),r(),n(4,"p")(5,"strong"),s(6,"Available Stock:"),r()(),n(7,"ul"),p(8,K,2,2,"li",8),r(),n(9,"ion-badge",9),s(10),r()()()),t&2){let o=i.$implicit,e=m(2);c(3),g(o.product_name),c(5),l("ngForOf",o.mandi),c(),l("color",e.getBadgeColor(o)),c(),h(" ",e.getBadgeText(o.stock_to_sales_ratio)," ")}}function U(t,i){if(t&1&&(n(0,"ion-card")(1,"ion-card-content")(2,"ion-list"),p(3,Q,11,4,"ion-item",8),r()()()),t&2){let o=m();c(3),l("ngForOf",o.filteredProducts())}}var re=(()=>{let i=class i{constructor(e){this.wholesalerService=e,this.products=[],this.isLoading=!1,this.error=null,j({alertCircle:W})}ngOnInit(){this.loadRestockingRecommendations()}loadRestockingRecommendations(){return f(this,null,function*(){this.isLoading=!0,this.error=null,this.wholesalerService.getRestockingRecommendations().subscribe({next:e=>{this.products=e,this.isLoading=!1},error:e=>{console.error("Failed to load restocking recommendations:",e),this.error="Failed to load recommendations. Please try again.",this.isLoading=!1}})})}getBadgeText(e){return e<2?"Low Stock":e<4?"Restock Soon":"Stock Sufficient"}getBadgeColor(e){let a=e.stock_to_sales_ratio;return a<2?"danger":a<4?"warning":"success"}filteredProducts(){return this.products.filter(e=>e.stock_to_sales_ratio<4).sort((e,a)=>e.stock_to_sales_ratio-a.stock_to_sales_ratio)}};i.\u0275fac=function(a){return new(a||i)(I(q))},i.\u0275cmp=k({type:i,selectors:[["app-restocking-recommendations"]],decls:10,vars:3,consts:[["slot","start"],["color","dark","defaultHref","/wholesaler/home"],[1,"ion-padding"],["class","ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center"],["name","alert-circle","color","danger","size","large"],["fill","clear",3,"click"],[4,"ngFor","ngForOf"],[3,"color"]],template:function(a,d){a&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),_(3,"ion-back-button",1),r(),n(4,"ion-title"),s(5,"Restock Recs"),r()()(),n(6,"ion-content",2),p(7,G,4,0,"div",3)(8,J,7,1,"ion-card",4)(9,U,4,1,"ion-card",4),r()),a&2&&(c(7),l("ngIf",d.isLoading),c(),l("ngIf",d.error),c(),l("ngIf",!d.isLoading&&!d.error))},dependencies:[y,C,b,$,E,T,L,w,B,F,O,M,P,A,V,z,D,H,N],styles:["ion-badge[_ngcontent-%COMP%]{font-size:.9rem;padding:6px 10px;border-radius:8px}"]});let t=i;return t})();export{re as RestockingRecommendationsComponent};
