import{C as V,P as G,Q as R,T as k,c as A,d as M,g as j,ga as H,q as O,x as w,y as B}from"./chunk-BQTIQUN7.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{a as z}from"./chunk-FHEO7GNC.js";import{$ as u,D as S,I as s,J as f,Jb as l,Ka as y,Kb as x,La as F,Lb as N,M as I,Nb as T,Ob as $,Q as d,Qb as q,T as m,Ta as C,V as h,Vb as P,Xb as D,Ya as E,Z as o,Zb as L,_ as n,ea as _,n as b,p as U,pa as p,qa as v}from"./chunk-SSO4CHWC.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var J=(()=>{let t=class t{constructor(e){this.http=e,this.apiUrl=z.apiUrl}getAllUsers(){return this.http.get(`${this.apiUrl}/getAllUsers`)}createUser(e){return this.http.post(`${this.apiUrl}/userTableDetails`,e)}updateUserById(e){return this.http.put(`${this.apiUrl}/usertableUpdate`,e)}deleteUser(e){return this.http.delete(`${this.apiUrl}/users/${e}`)}getLocations(){return this.http.get(`${this.apiUrl}/getLocations`)}getStates(){return this.http.get(`${this.apiUrl}/getStates`)}getUserTypes(){return this.http.get(`${this.apiUrl}/getUserTypes`)}};t.\u0275fac=function(r){return new(r||t)(U(E))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function W(i,t){i&1&&(o(0,"p",15),p(1,"Name is required (max 255 characters)."),n())}function X(i,t){i&1&&(o(0,"p",15),p(1,"Mobile Number is required (max 15 digits)."),n())}function Y(i,t){i&1&&(o(0,"p",15),p(1,"Pincode is required (max 10 characters)."),n())}function Z(i,t){if(i&1&&(o(0,"ion-select-option",12),p(1),n()),i&2){let c=t.$implicit;m("value",c.id),s(),v(c.name)}}function ee(i,t){if(i&1&&(o(0,"ion-select-option",12),p(1),n()),i&2){let c=t.$implicit;m("value",c.id),s(),v(c.name)}}function te(i,t){if(i&1&&(o(0,"ion-select-option",12),p(1),n()),i&2){let c=t.$implicit;m("value",c.id),s(),v(c.name)}}var ce=(()=>{let t=class t{constructor(e,r,a,g){this.fb=e,this.el=r,this.userService=a,this.navCtrl=g,this.locations=[],this.states=[],this.roles=[],this.users=[],this.userForm=this.fb.group({name:["",[l.required,l.maxLength(255)]],mobile_num:["",[l.required,l.pattern("^[0-9]{10,15}$"),l.maxLength(15)]],email:["",[l.required,l.email,l.maxLength(255)]],address:[""],pincode:["",[l.required,l.maxLength(10),l.pattern("^[0-9]{5,10}$")]],location:[null],state:[null],role_id:[5,l.required],active_status:[1,l.required]}),this.loadDropdownData(),this.loadUsers()}loadDropdownData(){this.userService.getLocations().subscribe(e=>this.locations=e),this.userService.getStates().subscribe(e=>this.states=e),this.userService.getUserTypes().subscribe(e=>this.roles=e)}loadUsers(){this.userService.getAllUsers().subscribe({next:e=>this.users=e,error:e=>console.error("Error fetching users:",e)})}isFieldInvalid(e){let r=this.userForm.get(e);return!!(r&&r.invalid&&(r.dirty||r.touched))}submitForm(){if(this.userForm.valid)this.userService.createUser(this.userForm.value).subscribe({next:e=>{console.log("User added:",e),this.userForm.reset(),this.loadUsers()},error:e=>{console.error("Error adding user:",e)}});else{let e=this.el.nativeElement.querySelector(".ng-invalid");e&&e.scrollIntoView({behavior:"smooth"})}}updateUser(e){if(!e.user_id){console.error("User ID is missing for update");return}this.userService.updateUserById(e).subscribe({next:r=>{console.log("User updated:",r),this.loadUsers()},error:r=>{console.error("Error updating user:",r)}})}deleteUser(e){this.userService.deleteUser(e).subscribe({next:r=>{console.log("User deleted:",r),this.loadUsers()},error:r=>{console.error("Error deleting user:",r)}})}};t.\u0275fac=function(r){return new(r||t)(f(P),f(S),f(J),f(L))},t.\u0275cmp=I({type:t,selectors:[["app-user"]],decls:34,vars:15,consts:[[3,"ngSubmit","formGroup"],["label","Name","labelPlacement","floating","formControlName","name"],["class","error",4,"ngIf"],["label","Mobile Number","labelPlacement","floating","type","tel","formControlName","mobile_num"],["label","Email","labelPlacement","floating","type","email","formControlName","email"],["label","Address","labelPlacement","floating","formControlName","address"],["label","Pincode","labelPlacement","floating","type","text","formControlName","pincode"],["label","Location","formControlName","location"],[3,"value",4,"ngFor","ngForOf"],["label","State","formControlName","state"],["label","User Role","formControlName","role_id"],["label","Active Status","formControlName","active_status"],[3,"value"],[1,"center-button"],["type","submit",1,"custom-button"],[1,"error"]],template:function(r,a){r&1&&(o(0,"ion-content")(1,"form",0),_("ngSubmit",function(){return a.submitForm()}),o(2,"ion-list")(3,"ion-item"),u(4,"ion-input",1),n(),d(5,W,2,0,"p",2),o(6,"ion-item"),u(7,"ion-input",3),n(),d(8,X,2,0,"p",2),o(9,"ion-item"),u(10,"ion-input",4),n(),o(11,"ion-item"),u(12,"ion-textarea",5),n(),o(13,"ion-item"),u(14,"ion-input",6),n(),d(15,Y,2,0,"p",2),o(16,"ion-item")(17,"ion-select",7),d(18,Z,2,2,"ion-select-option",8),n()(),o(19,"ion-item")(20,"ion-select",9),d(21,ee,2,2,"ion-select-option",8),n()(),o(22,"ion-item")(23,"ion-select",10),d(24,te,2,2,"ion-select-option",8),n()(),o(25,"ion-item")(26,"ion-select",11)(27,"ion-select-option",12),p(28,"Active"),n(),o(29,"ion-select-option",12),p(30,"Inactive"),n()()(),o(31,"div",13)(32,"ion-button",14),p(33," SUBMIT "),n()()()()()),r&2&&(s(),m("formGroup",a.userForm),s(2),h("invalid",a.isFieldInvalid("name")),s(2),m("ngIf",a.isFieldInvalid("name")),s(),h("invalid",a.isFieldInvalid("mobile_num")),s(2),m("ngIf",a.isFieldInvalid("mobile_num")),s(5),h("invalid",a.isFieldInvalid("pincode")),s(2),m("ngIf",a.isFieldInvalid("pincode")),s(3),m("ngForOf",a.locations),s(3),m("ngForOf",a.states),s(3),m("ngForOf",a.roles),s(3),m("value",1),s(2),m("value",0))},dependencies:[H,j,O,w,B,V,G,R,k,A,M,C,y,F,D,T,x,N,$,q],encapsulation:2});let i=t;return i})();export{ce as UserComponent};
