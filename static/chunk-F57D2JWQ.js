import{C as G,d as x,g as D,ga as V,q as T,x as $,y as j}from"./chunk-BQTIQUN7.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{a as q}from"./chunk-FHEO7GNC.js";import{$ as b,I as o,Jb as c,Kb as F,La as v,Lb as _,M as y,Nb as S,Ob as E,Q as h,Qb as M,T as a,Ta as I,V as C,Vb as N,Xb as U,Ya as B,Z as n,_ as u,ea as f,n as g,p,pa as l,q as m}from"./chunk-SSO4CHWC.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import{a as d}from"./chunk-LNJ3S2LQ.js";var w=(()=>{let i=class i{constructor(e){this.http=e,this.apiUrl=q.apiUrl}getBusinessCategories(){return this.http.get(`${this.apiUrl}/getBusinessCategory`)}getBusinessCategoryById(e){return this.http.get(`${this.apiUrl}/getBusinessCategory?id=${e}`)}createBusinessCategory(e){return this.http.post(`${this.apiUrl}/InsertBusinessCategory`,e)}updateBusinessCategory(e){return this.http.put(`${this.apiUrl}/businessCategoryUpdate`,e)}};i.\u0275fac=function(t){return new(t||i)(p(B))},i.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();function P(s,i){s&1&&(n(0,"p",5),l(1," Business Category Name is required (max 25 characters). "),u())}var ee=(()=>{let i=class i{constructor(){this.fb=m(N),this.businessCategoryService=m(w),this.businessCategories=[],this.isEditMode=!1,this.editCategoryId=null,this.businessCategoryForm=this.fb.group({b_category_name:["",[c.required,c.maxLength(25)]]})}ngOnInit(){this.loadBusinessCategories()}isFieldInvalid(e){let t=this.businessCategoryForm.get(e);return!!t&&t.invalid&&(t.dirty||t.touched)}loadBusinessCategories(){this.businessCategoryService.getBusinessCategories().subscribe({next:e=>this.businessCategories=e,error:e=>console.error("Error fetching business categories:",e)})}submitForm(){if(this.businessCategoryForm.invalid)return;let e=this.businessCategoryForm.value;this.isEditMode&&this.editCategoryId!==null?this.updateCategory(e):this.createCategory(e)}updateCategory(e){let t=d({b_category_id:this.editCategoryId},e);this.businessCategoryService.updateBusinessCategory(t).subscribe({next:()=>{console.log("Business category updated successfully"),this.resetForm(),this.loadBusinessCategories()},error:r=>console.error("Error updating business category:",r)})}createCategory(e){this.businessCategoryService.createBusinessCategory(e).subscribe({next:t=>{console.log("Business category added successfully",t),this.resetForm(),this.loadBusinessCategories()},error:t=>console.error("Error adding business category:",t)})}editCategory(e){this.isEditMode=!0,this.editCategoryId=e.b_category_id,this.businessCategoryForm.patchValue({b_category_name:e.b_category_name})}resetForm(){this.businessCategoryForm.reset(),this.isEditMode=!1,this.editCategoryId=null}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=y({type:i,selectors:[["app-business-category"]],decls:9,vars:5,consts:[[3,"ngSubmit","formGroup"],["label","Category Name","labelPlacement","floating","formControlName","b_category_name"],["class","error",4,"ngIf"],[1,"center-button"],["type","submit",1,"custom-button",3,"disabled"],[1,"error"]],template:function(t,r){t&1&&(n(0,"ion-content")(1,"form",0),f("ngSubmit",function(){return r.submitForm()}),n(2,"ion-list")(3,"ion-item"),b(4,"ion-input",1),u(),h(5,P,2,0,"p",2),n(6,"div",3)(7,"ion-button",4),l(8," SUBMIT "),u()()()()()),t&2&&(o(),a("formGroup",r.businessCategoryForm),o(2),C("invalid",r.isFieldInvalid("b_category_name")),o(2),a("ngIf",r.isFieldInvalid("b_category_name")),o(2),a("disabled",r.businessCategoryForm.invalid))},dependencies:[I,v,V,D,T,$,j,G,x,U,S,F,_,E,M],encapsulation:2});let s=i;return s})();export{ee as BusinessCategoryComponent};
