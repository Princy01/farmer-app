import{a as c}from"./chunk-FHEO7GNC.js";import{Ya as l,e as o,h as i,l as n,n as h,p as a}from"./chunk-SSO4CHWC.js";var m=(()=>{let r=class r{constructor(e){this.http=e,this.apiUrl=c.apiUrl,this.tokenKey="auth_token",this.refreshTokenKey="refresh_token"}login(e){return this.http.post(`${this.apiUrl}/auth/login`,e).pipe(n(t=>{t.access_token&&localStorage.setItem(this.tokenKey,t.access_token),t.refresh_token&&localStorage.setItem(this.refreshTokenKey,t.refresh_token)}))}refreshToken(){let e=localStorage.getItem(this.refreshTokenKey);return e?this.http.post(`${this.apiUrl}/auth/refresh-token`,{refresh_token:e}).pipe(n(t=>{t.access_token&&localStorage.setItem(this.tokenKey,t.access_token),t.refresh_token&&localStorage.setItem(this.refreshTokenKey,t.refresh_token)}),i(t=>(this.logout(),o(()=>t)))):o(()=>new Error("No refresh token available"))}registerUser(e){let t=`${this.apiUrl}/auth/register-user`;return this.http.post(t,e).pipe(i(f=>o(()=>f)))}logout(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey)}getToken(){return localStorage.getItem(this.tokenKey)}isLoggedIn(){return!!this.getToken()}getLocations(){return this.http.get(`${this.apiUrl}/getLocations`).pipe(i(e=>o(()=>e)))}getStates(){return this.http.get(`${this.apiUrl}/getStates`).pipe(i(e=>o(()=>e)))}};r.\u0275fac=function(t){return new(t||r)(a(l))},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();export{m as a};
