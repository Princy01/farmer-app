import{L as te,P as ne,a as ie,pb as re,va as ae}from"./chunk-ZSFP4GD7.js";import{A as Q,B as W,C as X,E as Y,T as Z,b as B,d as G,g as R,ga as ee,q as H,w as z,x as J,y as K}from"./chunk-BQTIQUN7.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{a as oe}from"./chunk-FHEO7GNC.js";import{$ as p,D as y,I as r,J as h,Jb as d,Ka as N,Kb as w,La as P,Lb as A,M,Nb as D,Ob as $,Q as c,Qb as U,T as s,Ta as L,Ub as j,V as u,Vb as O,Xb as V,Ya as T,Z as i,Zb as k,_ as t,bb as q,e as _,ea as C,h as v,n as E,p as S,pa as m,qa as x,ra as g,sa as F}from"./chunk-SSO4CHWC.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";var le=(()=>{let a=class a{constructor(e){this.http=e,this.apiUrl=oe.apiUrl}createMandi(e){return this.http.post(`${this.apiUrl}/mandiDetails`,e).pipe(v(this.handleError))}updateMandi(e){return this.http.put(`${this.apiUrl}/mandiUpdate`,e).pipe(v(this.handleError))}deleteMandi(e){return this.http.delete(`${this.apiUrl}/mandiDelete/${e}`).pipe(v(this.handleError))}getAllMandis(){return this.http.get(`${this.apiUrl}/getMandiDetails`)}handleError(e){if(e.error instanceof ErrorEvent)return console.error("An error occurred:",e.error.message),_(()=>new Error("Something went wrong. Please try again later."));{console.error(`Backend returned code ${e.status}, body was: ${e.error}`);let l="Something went wrong. Please try again later.";return e.error&&e.error.message&&(l=e.error.message),_(()=>new Error(l))}}};a.\u0275fac=function(l){return new(l||a)(S(T))},a.\u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();function pe(n,a){n&1&&(i(0,"p",15),m(1,"Mandi Location is required (max 255 characters)."),t())}function ce(n,a){n&1&&(i(0,"p",15),m(1,"Mandi Number is required (max 50 characters)."),t())}function ue(n,a){n&1&&(i(0,"p",15),m(1,"Mandi Incharge is required (max 255 characters)."),t())}function fe(n,a){n&1&&(i(0,"p",15),m(1,"Enter a valid contact number (max 15 digits)."),t())}function he(n,a){n&1&&(i(0,"p",15),m(1,"Enter a valid pincode (6 digits)."),t())}function ve(n,a){n&1&&(i(0,"p",15),m(1,"City ID is required."),t())}function ge(n,a){n&1&&(i(0,"p",15),m(1,"State ID is required."),t())}function _e(n,a){if(n&1&&(i(0,"ion-item")(1,"ion-label")(2,"h2"),m(3),t(),i(4,"p"),p(5,"ion-icon",16),m(6),t(),i(7,"p"),m(8),t(),i(9,"p"),m(10),t()(),i(11,"ion-note",17),m(12),t()()),n&2){let f=a.$implicit;r(3),x(f.mandi_location),r(3),F(" ",f.city_name,", ",f.state_name," "),r(2),g("Incharge: ",f.mandi_incharge,""),r(2),g("Contact: ",f.mandi_incharge_num,""),r(2),g(" PIN: ",f.mandi_pincode," ")}}var we=(()=>{let a=class a{constructor(e,l,o,I,me){this.fb=e,this.el=l,this.mandiService=o,this.navCtrl=I,this.route=me,this.mandis=[],this.isMandiListExpanded=!1,ie({chevronDown:te,chevronUp:ne,trashOutline:re,locationOutline:ae}),this.mandi=this.fb.group({mandi_location:["",[d.required,d.maxLength(255)]],mandi_number:["",[d.required,d.maxLength(50)]],mandi_incharge:["",[d.required,d.maxLength(255)]],mandi_incharge_num:["",[d.required,d.pattern("^[0-9]*$"),d.maxLength(15)]],mandi_pincode:["",[d.required,d.pattern("^[0-9]{6}$")]],mandi_address:[""],mandi_city:[null],mandi_state:[null],remarks:[""]}),this.route.queryParams.subscribe(b=>{b.mandi_city&&this.mandi.patchValue({mandi_city:b.mandi_city})})}ngOnInit(){this.fetchMandis()}fetchMandis(){this.mandiService.getAllMandis().subscribe({next:e=>{this.mandis=e},error:e=>{console.error("Error fetching mandis:",e)}})}toggleMandiList(){this.isMandiListExpanded=!this.isMandiListExpanded}isFieldInvalid(e){let l=this.mandi.get(e);return!!(l&&l.invalid&&(l.dirty||l.touched))}submitForm(){this.mandi.valid&&this.mandiService.createMandi(this.mandi.value).subscribe({next:()=>{this.fetchMandis(),this.mandi.reset()},error:e=>{console.error("Error:",e)}})}};a.\u0275fac=function(l){return new(l||a)(h(O),h(y),h(le),h(k),h(q))},a.\u0275cmp=M({type:a,selectors:[["app-mandi"]],decls:37,vars:24,consts:[[3,"ngSubmit","formGroup"],["label","Location","labelPlacement","floating","formControlName","mandi_location"],["class","error",4,"ngIf"],["label","Number","labelPlacement","floating","formControlName","mandi_number"],["label","Incharge","labelPlacement","floating","formControlName","mandi_incharge"],["label","Incharge Contact","labelPlacement","floating","type","tel","formControlName","mandi_incharge_num"],["label","Pincode","labelPlacement","floating","type","text","maxlength","6","formControlName","mandi_pincode"],["label","Address (Optional)","labelPlacement","floating","formControlName","mandi_address"],["label","City","labelPlacement","floating","type","number","formControlName","mandi_city"],["label","State","labelPlacement","floating","type","number","formControlName","mandi_state"],["label","Remarks (Optional)","labelPlacement","floating","formControlName","remarks"],[1,"center-button"],["type","submit",1,"custom-button",3,"disabled"],[1,"center-label"],[4,"ngFor","ngForOf"],[1,"error"],["name","location-outline"],["slot","end","color","medium"]],template:function(l,o){l&1&&(i(0,"ion-content")(1,"form",0),C("ngSubmit",function(){return o.submitForm()}),i(2,"ion-list")(3,"ion-item"),p(4,"ion-input",1),t(),c(5,pe,2,0,"p",2),i(6,"ion-item"),p(7,"ion-input",3),t(),c(8,ce,2,0,"p",2),i(9,"ion-item"),p(10,"ion-input",4),t(),c(11,ue,2,0,"p",2),i(12,"ion-item"),p(13,"ion-input",5),t(),c(14,fe,2,0,"p",2),i(15,"ion-item"),p(16,"ion-input",6),t(),c(17,he,2,0,"p",2),i(18,"ion-item"),p(19,"ion-textarea",7),t(),i(20,"ion-item"),p(21,"ion-input",8),t(),c(22,ve,2,0,"p",2),i(23,"ion-item"),p(24,"ion-input",9),t(),c(25,ge,2,0,"p",2),i(26,"ion-item"),p(27,"ion-textarea",10),t(),i(28,"div",11)(29,"ion-button",12),m(30," SUBMIT "),t()()()(),i(31,"ion-list")(32,"ion-label",13),m(33,"AVAILABLE MANDIS"),t(),i(34,"ion-item-group")(35,"ion-list"),c(36,_e,13,6,"ion-item",14),t()()()()),l&2&&(r(),s("formGroup",o.mandi),r(2),u("invalid",o.isFieldInvalid("mandi_location")),r(2),s("ngIf",o.isFieldInvalid("mandi_location")),r(),u("invalid",o.isFieldInvalid("mandi_number")),r(2),s("ngIf",o.isFieldInvalid("mandi_number")),r(),u("invalid",o.isFieldInvalid("mandi_incharge")),r(2),s("ngIf",o.isFieldInvalid("mandi_incharge")),r(),u("invalid",o.isFieldInvalid("mandi_incharge_num")),r(2),s("ngIf",o.isFieldInvalid("mandi_incharge_num")),r(),u("invalid",o.isFieldInvalid("mandi_pincode")),r(2),s("ngIf",o.isFieldInvalid("mandi_pincode")),r(3),u("invalid",o.isFieldInvalid("mandi_city")),r(2),s("ngIf",o.isFieldInvalid("mandi_city")),r(),u("invalid",o.isFieldInvalid("mandi_state")),r(2),s("ngIf",o.isFieldInvalid("mandi_state")),r(4),s("disabled",o.mandi.invalid),r(7),s("ngForOf",o.mandis))},dependencies:[ee,R,H,z,J,K,Q,W,X,Y,Z,B,G,L,N,P,V,D,w,A,j,$,U],encapsulation:2});let n=a;return n})();export{we as MandiComponent};
