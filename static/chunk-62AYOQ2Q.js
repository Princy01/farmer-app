import{a as Q,b as U}from"./chunk-T2GDYHWM.js";import{K,a as q}from"./chunk-ZSFP4GD7.js";import{B as z,L as N,M as J,P as V,Q as j,U as G,W as X,a as v,c as I,d as k,g as w,ga as H,h as E,n as A,p as B,q as L,u as W,w as F,y as R}from"./chunk-BQTIQUN7.js";import"./chunk-EKYO6VDW.js";import"./chunk-24IHF5HR.js";import"./chunk-KFDLIPX5.js";import"./chunk-EPJFQAWK.js";import"./chunk-4UA7XWWY.js";import"./chunk-3P4LCZSC.js";import"./chunk-QB2INVK3.js";import"./chunk-T4NRX6V6.js";import"./chunk-R2OJ64UA.js";import"./chunk-RPLHLNGJ.js";import"./chunk-JZD5S6T4.js";import"./chunk-G223UPOJ.js";import"./chunk-ZSV5V4UX.js";import"./chunk-6AR4DOND.js";import"./chunk-67J5UTTO.js";import"./chunk-3QTGG56W.js";import"./chunk-SACCBILY.js";import"./chunk-GYT6Z5WN.js";import{$ as f,I as l,J as _,Ka as P,Kb as O,M,Mb as D,Q as S,T as p,Ta as b,Wb as y,Z as a,Zb as T,_ as i,ea as m,pa as s,ra as x,va as h,wa as u,xa as g}from"./chunk-SSO4CHWC.js";import"./chunk-5BIRNKZZ.js";import"./chunk-PN5KWPLT.js";import"./chunk-ZPEM7JC5.js";import"./chunk-AQXWH6LN.js";import"./chunk-XFZJ45JG.js";import"./chunk-QYFRFJTZ.js";import"./chunk-MN6QQCMN.js";import"./chunk-TP642E63.js";import"./chunk-SRRF7I6H.js";import"./chunk-LNJ3S2LQ.js";function Z(c,d){if(c&1&&(a(0,"ion-select-option",26),s(1),i()),c&2){let C=d.$implicit;p("value",C.name),l(),x(" ",C.name," ")}}var ce=(()=>{let d=class d{constructor(t){this.navController=t,this.selectedTimeRange="3",this.searchTerm="",this.allSelected=!1,this.products=[{name:"Potato",isSelected:!0,data:[]},{name:"Tomato",isSelected:!0,data:[]},{name:"Onion",isSelected:!1,data:[]},{name:"Cauliflower",isSelected:!1,data:[]},{name:"Green Peas",isSelected:!1,data:[]},{name:"Cabbage",isSelected:!1,data:[]}],this.filteredProducts=[],this.selectedProducts=["Potato","Tomato"],this.customActionSheetOptions={header:"Select Products",subHeader:"Choose products to display in charts"},q({chevronBackOutline:K})}goToTrends(){this.navController.navigateBack("/wholesaler/trends")}ngOnInit(){this.filteredProducts=[...this.products],this.loadInitialData(),this.syncProductSelections(),this.updateCharts()}onProductSelectionChange(){this.products.forEach(t=>{t.isSelected=this.selectedProducts.includes(t.name)}),this.updateCharts()}filterProducts(){if(!this.searchTerm.trim()){this.filteredProducts=[...this.products];return}let t=this.searchTerm.toLowerCase();this.filteredProducts=this.products.filter(r=>r.name.toLowerCase().includes(t))}toggleAllProducts(){this.allSelected=!this.allSelected,this.allSelected?this.selectedProducts=this.products.map(t=>t.name):this.selectedProducts=[],this.onProductSelectionChange()}syncProductSelections(){this.products.forEach(t=>{t.isSelected=this.selectedProducts.includes(t.name)}),this.allSelected=this.selectedProducts.length===this.products.length}loadInitialData(){this.products.forEach(t=>{t.data=Array.from({length:36},()=>Math.floor(Math.random()*8e4+2e4))})}updateCharts(){let t=parseInt(this.selectedTimeRange),r=this.products.filter(e=>e.isSelected);this.updateSeasonalDemandChart(r,t),this.updateProductDemandChart(r)}updateSeasonalDemandChart(t,r){this.seasonalDemandOptions={series:t.map(e=>({name:e.name,data:e.data.slice(-r)})),chart:{height:350,type:"line",background:"#ffffff",toolbar:{show:!1}},colors:["#FF6B6B","#45B7D1","#4ECDC4","#96CEB4","#FFEEAD","#D4A5A5"],xaxis:{categories:this.getLastXMonths(r)},yaxis:{title:{text:"Demand (kg)"},labels:{formatter:e=>e.toLocaleString()+" kg"}},tooltip:{y:{formatter:e=>e.toLocaleString()+" kg"}}}}updateProductDemandChart(t){let r=t.map(n=>n.data[n.data.length-1]),e=t.map(n=>n.data[n.data.length-2]);this.productDemandOptions={series:[{name:"Current Month",data:r},{name:"Previous Month",data:e}],chart:{type:"bar",height:350,background:"#ffffff",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",borderRadius:5}},colors:["#2E7D32","#1976D2"],xaxis:{categories:t.map(n=>n.name)},yaxis:{title:{text:"Demand (kg)"},labels:{formatter:n=>n.toLocaleString()+" kg"}},tooltip:{y:{formatter:n=>n.toLocaleString()+" kg"}}}}getLastXMonths(t){let r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=new Date().getMonth(),n=[];for(let o=t-1;o>=0;o--){let Y=(e-o+12)%12;n.push(r[Y])}return n}};d.\u0275fac=function(r){return new(r||d)(_(T))},d.\u0275cmp=M({type:d,selectors:[["ng-component"]],decls:47,vars:20,consts:[["slot","start"],["color","dark",3,"click"],["name","chevron-back-outline"],[1,"ion-no-padding"],[1,"full-height"],["size","12","size-md","3",1,"sidebar"],[1,"filters-container"],["position","stacked"],["interface","popover",3,"ngModelChange","ionChange","ngModel"],["value","3"],["value","6"],["value","12"],["value","18"],["value","24"],["value","36"],["interface","action-sheet",3,"ngModelChange","ionChange","ngModel","multiple","interfaceOptions"],["slot","header"],["placeholder","Search products",3,"ngModelChange","ionInput","ngModel"],["lines","none"],[3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["size","12","size-md","9",1,"charts-area"],[1,"charts-container"],[1,"chart-wrapper"],[3,"series","chart","xaxis","yaxis","colors","tooltip"],[3,"series","chart","xaxis","yaxis","colors","plotOptions","tooltip"],[3,"value"]],template:function(r,e){r&1&&(a(0,"ion-content")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),m("click",function(){return e.goToTrends()}),f(4,"ion-icon",2),i()(),a(5,"ion-title"),s(6,"Trends"),i()(),a(7,"ion-grid",3)(8,"ion-row",4)(9,"ion-col",5)(10,"div",6)(11,"ion-item")(12,"ion-label",7),s(13,"Time Range"),i(),a(14,"ion-select",8),g("ngModelChange",function(o){return u(e.selectedTimeRange,o)||(e.selectedTimeRange=o),o}),m("ionChange",function(){return e.updateCharts()}),a(15,"ion-select-option",9),s(16,"3 Months"),i(),a(17,"ion-select-option",10),s(18,"6 Months"),i(),a(19,"ion-select-option",11),s(20,"12 Months"),i(),a(21,"ion-select-option",12),s(22,"18 Months"),i(),a(23,"ion-select-option",13),s(24,"24 Months"),i(),a(25,"ion-select-option",14),s(26,"36 Months"),i()()(),a(27,"ion-item")(28,"ion-label",7),s(29,"Select Products"),i(),a(30,"ion-select",15),g("ngModelChange",function(o){return u(e.selectedProducts,o)||(e.selectedProducts=o),o}),m("ionChange",function(){return e.onProductSelectionChange()}),a(31,"div",16)(32,"ion-searchbar",17),g("ngModelChange",function(o){return u(e.searchTerm,o)||(e.searchTerm=o),o}),m("ionInput",function(){return e.filterProducts()}),i(),a(33,"ion-item",18)(34,"ion-checkbox",19),g("ngModelChange",function(o){return u(e.allSelected,o)||(e.allSelected=o),o}),m("ionChange",function(){return e.toggleAllProducts()}),s(35," Select All "),i()()(),S(36,Z,2,2,"ion-select-option",20),i()()()(),a(37,"ion-col",21)(38,"div",22)(39,"div",23)(40,"h3"),s(41,"Seasonal Demand Patterns"),i(),f(42,"apx-chart",24),i(),a(43,"div",23)(44,"h3"),s(45,"Product Demand Comparison"),i(),f(46,"apx-chart",25),i()()()()()()),r&2&&(l(14),h("ngModel",e.selectedTimeRange),l(16),h("ngModel",e.selectedProducts),p("multiple",!0)("interfaceOptions",e.customActionSheetOptions),l(2),h("ngModel",e.searchTerm),l(2),h("ngModel",e.allSelected),l(2),p("ngForOf",e.filteredProducts),l(6),p("series",e.seasonalDemandOptions.series)("chart",e.seasonalDemandOptions.chart)("xaxis",e.seasonalDemandOptions.xaxis)("yaxis",e.seasonalDemandOptions.yaxis)("colors",e.seasonalDemandOptions.colors)("tooltip",e.seasonalDemandOptions.tooltip),l(4),p("series",e.productDemandOptions.series)("chart",e.productDemandOptions.chart)("xaxis",e.productDemandOptions.xaxis)("yaxis",e.productDemandOptions.yaxis)("colors",e.productDemandOptions.colors)("plotOptions",e.productDemandOptions.plotOptions)("tooltip",e.productDemandOptions.tooltip))},dependencies:[H,w,E,A,B,L,W,F,R,z,N,J,V,j,G,X,v,I,k,U,Q,y,O,D,b,P],styles:[".full-height[_ngcontent-%COMP%]{height:100%}.sidebar[_ngcontent-%COMP%]{background:#f5f5f5;height:100%}.filters-container[_ngcontent-%COMP%]{padding:16px;height:100%;display:flex;flex-direction:column;gap:16px}.products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 16px;background:#e0e0e0;border-radius:8px}.product-search[_ngcontent-%COMP%]{--background: #ffffff;--box-shadow: none;--border-radius: 8px}.product-list[_ngcontent-%COMP%]{overflow-y:auto;flex:1;background:#fff;border-radius:8px;padding:8px}.product-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--padding-start: 8px;--padding-end: 8px;--min-height: 40px;margin-bottom:4px}.charts-area[_ngcontent-%COMP%]{padding:16px;height:100%}.chart-container[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:20px;height:calc(100vh - 32px);box-shadow:0 2px 10px #0000001a}h3[_ngcontent-%COMP%]{color:#333;margin:0 0 20px;text-align:center;font-size:1.2rem}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{height:auto}.filters-container[_ngcontent-%COMP%]{max-height:300px}.chart-container[_ngcontent-%COMP%]{height:400px}ion-select[_ngcontent-%COMP%]::part(icon){color:#666}ion-searchbar[_ngcontent-%COMP%]{padding:8px 16px;--background: #f5f5f5;--border-radius: 8px}ion-select[_ngcontent-%COMP%]::part(placeholder), ion-select[_ngcontent-%COMP%]::part(text){color:#333;font-size:14px}.select-header[_ngcontent-%COMP%]{padding:16px;background:#f5f5f5;border-bottom:1px solid #ddd}}"]});let c=d;return c})();export{ce as DemandTrendsComponent};
